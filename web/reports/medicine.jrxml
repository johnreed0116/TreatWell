<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="medicine" language="groovy" pageWidth="430" pageHeight="802" columnWidth="430" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0">
	<property name="ireport.callouts" value="##Wed May 23 13:27:27 PKT 2018"/>
	<property name="ireport.zoom" value="2.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<style name="style1" isDefault="false" mode="Opaque" backcolor="#F4F5F5">
		<conditionalStyle>
			<conditionExpression><![CDATA[$V{REPORT_COUNT}%2 ==0]]></conditionExpression>
			<style isDefault="false" style="style1" backcolor="#D4DED9"/>
		</conditionalStyle>
	</style>
	<parameter name="prescription_id" class="java.math.BigDecimal"/>
	<queryString>
		<![CDATA[SELECT '1' GROUP_ID, TM.PRODUCT_NME MEDICINE_NME,
 TPD.QTY,TPD.DAYS,TDU.TITLE DOSE_USAGE,TDU.TITLE_URDU,INITCAP(TF.TITLE) FREQUENCY,
 TO_CHAR(TPM.DTE,'DD-MON-YYYY') PRESC_DTE
 FROM TW_PRESCRIPTION_MASTER TPM,TW_PRESC_MEDICINE TPD,TW_MEDICINE TM,TW_DOSE_USAGE TDU,TW_FREQUENCY TF
 WHERE TPM.TW_PRESCRIPTION_MASTER_ID=TPD.TW_PRESCRIPTION_MASTER_ID
  AND TPD.TW_MEDICINE_ID=TM.TW_MEDICINE_ID
  AND TPD.TW_DOSE_USAGE_ID=TDU.TW_DOSE_USAGE_ID(+)
  AND TPD.TW_FREQUENCY_ID=TF.TW_FREQUENCY_ID(+)
  AND TPM.TW_PRESCRIPTION_MASTER_ID=$P{prescription_id}
UNION ALL
SELECT '2' GROUP_ID, TL.TITLE, NULL QTY, NULL DAYS, NULL DOSE_USAGE, NULL TITLE_URDU, LAB.LAB_NME, NULL PRESC_DTE
 FROM TW_PRESCRIPTION_MASTER TPM,TW_PRESC_LABTEST TPD,TW_LAB_TEST TL,TW_LAB_MASTER LAB,TW_LAB_DETAIL DET
 WHERE TPM.TW_PRESCRIPTION_MASTER_ID=TPD.TW_PRESCRIPTION_MASTER_ID
  AND TPD.TW_LAB_TEST_ID=TL.TW_LAB_TEST_ID
  AND TPD.TW_LAB_MASTER_ID=LAB.TW_LAB_MASTER_ID(+)
  AND TPD.TW_LAB_DETAIL_ID=DET.TW_LAB_DETAIL_ID(+)
  AND TPM.TW_PRESCRIPTION_MASTER_ID=$P{prescription_id}
 ORDER BY 1,2]]>
	</queryString>
	<field name="GROUP_ID" class="java.lang.String"/>
	<field name="MEDICINE_NME" class="java.lang.String"/>
	<field name="QTY" class="java.math.BigDecimal"/>
	<field name="DAYS" class="java.math.BigDecimal"/>
	<field name="DOSE_USAGE" class="java.lang.String"/>
	<field name="TITLE_URDU" class="java.lang.String"/>
	<field name="FREQUENCY" class="java.lang.String"/>
	<field name="PRESC_DTE" class="java.lang.String"/>
	<group name="Group1">
		<groupExpression><![CDATA[$F{GROUP_ID}]]></groupExpression>
		<groupHeader>
			<band height="15">
				<printWhenExpression><![CDATA[( $F{GROUP_ID}.equals( "1" ) ? true : false )]]></printWhenExpression>
				<rectangle>
					<reportElement x="0" y="0" width="430" height="15" backcolor="#CCCCCC"/>
					<graphicElement>
						<pen lineWidth="0.5" lineStyle="Dashed" lineColor="#666666"/>
					</graphicElement>
				</rectangle>
				<staticText>
					<reportElement x="265" y="0" width="165" height="13"/>
					<box leftPadding="5"/>
					<textElement verticalAlignment="Middle">
						<font fontName="SansSerif" size="10" isBold="true" isItalic="false"/>
					</textElement>
					<text><![CDATA[Usage]]></text>
				</staticText>
				<staticText>
					<reportElement x="150" y="0" width="19" height="13"/>
					<box leftPadding="0"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font fontName="SansSerif" size="10" isBold="true" isItalic="false"/>
					</textElement>
					<text><![CDATA[Qty]]></text>
				</staticText>
				<staticText>
					<reportElement x="30" y="0" width="120" height="13"/>
					<box leftPadding="5"/>
					<textElement verticalAlignment="Middle">
						<font fontName="SansSerif" size="10" isBold="true" isItalic="false"/>
					</textElement>
					<text><![CDATA[Medicine ]]></text>
				</staticText>
				<staticText>
					<reportElement x="192" y="0" width="72" height="13"/>
					<box leftPadding="5"/>
					<textElement verticalAlignment="Middle">
						<font fontName="SansSerif" size="10" isBold="true" isItalic="false"/>
					</textElement>
					<text><![CDATA[Frequency]]></text>
				</staticText>
				<staticText>
					<reportElement x="170" y="0" width="21" height="13"/>
					<box leftPadding="0"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font fontName="SansSerif" size="10" isBold="true" isItalic="false"/>
					</textElement>
					<text><![CDATA[Days]]></text>
				</staticText>
				<staticText>
					<reportElement x="1" y="0" width="29" height="13"/>
					<box leftPadding="0"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font fontName="SansSerif" size="10" isBold="true" isItalic="false"/>
					</textElement>
					<text><![CDATA[#]]></text>
				</staticText>
			</band>
			<band height="15">
				<printWhenExpression><![CDATA[( $F{GROUP_ID}.equals( "2" ) ? true : false )]]></printWhenExpression>
				<rectangle>
					<reportElement x="0" y="0" width="265" height="15" backcolor="#CCCCCC"/>
					<graphicElement>
						<pen lineWidth="0.5" lineStyle="Dashed" lineColor="#666666"/>
					</graphicElement>
				</rectangle>
				<staticText>
					<reportElement x="30" y="0" width="120" height="13"/>
					<box leftPadding="5"/>
					<textElement verticalAlignment="Middle">
						<font fontName="SansSerif" size="10" isBold="true" isItalic="false"/>
					</textElement>
					<text><![CDATA[Test Name]]></text>
				</staticText>
				<staticText>
					<reportElement x="150" y="0" width="114" height="13"/>
					<box leftPadding="5"/>
					<textElement verticalAlignment="Middle">
						<font fontName="SansSerif" size="10" isBold="true" isItalic="false"/>
					</textElement>
					<text><![CDATA[Recomended Lab]]></text>
				</staticText>
				<staticText>
					<reportElement x="1" y="0" width="29" height="13"/>
					<box leftPadding="0"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font fontName="SansSerif" size="10" isBold="true" isItalic="false"/>
					</textElement>
					<text><![CDATA[#]]></text>
				</staticText>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="30"/>
		</groupFooter>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band splitType="Stretch"/>
	</title>
	<pageHeader>
		<band splitType="Stretch"/>
	</pageHeader>
	<columnHeader>
		<band splitType="Stretch"/>
	</columnHeader>
	<detail>
		<band height="20" splitType="Stretch">
			<printWhenExpression><![CDATA[( $F{GROUP_ID}.equals( "1" ) ? true : false )]]></printWhenExpression>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="192" y="0" width="72" height="18"/>
				<box leftPadding="3"/>
				<textElement verticalAlignment="Middle"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{FREQUENCY}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="0" y="0" width="30" height="18"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression class="java.lang.Integer"><![CDATA[$V{Group1_COUNT}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="150" y="0" width="20" height="18"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{QTY}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="170" y="0" width="22" height="18"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{DAYS}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
				<reportElement x="30" y="0" width="121" height="18"/>
				<box leftPadding="3"/>
				<textElement verticalAlignment="Middle"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{MEDICINE_NME}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="265" y="0" width="165" height="18"/>
				<box leftPadding="3"/>
				<textElement verticalAlignment="Middle"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{DOSE_USAGE}]]></textFieldExpression>
			</textField>
			<line>
				<reportElement positionType="FixRelativeToBottom" x="1" y="19" width="429" height="1"/>
				<graphicElement>
					<pen lineWidth="0.5" lineStyle="Dashed" lineColor="#333333"/>
				</graphicElement>
			</line>
		</band>
		<band height="20">
			<printWhenExpression><![CDATA[( $F{GROUP_ID}.equals( "2" ) ? true : false )]]></printWhenExpression>
			<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
				<reportElement x="30" y="0" width="121" height="18"/>
				<box leftPadding="3"/>
				<textElement verticalAlignment="Middle"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{MEDICINE_NME}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="151" y="0" width="113" height="18"/>
				<box leftPadding="3"/>
				<textElement verticalAlignment="Middle"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{FREQUENCY}]]></textFieldExpression>
			</textField>
			<line>
				<reportElement positionType="FixRelativeToBottom" x="1" y="19" width="264" height="1"/>
				<graphicElement>
					<pen lineWidth="0.5" lineStyle="Dashed" lineColor="#333333"/>
				</graphicElement>
			</line>
			<textField>
				<reportElement x="0" y="0" width="30" height="18"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression class="java.lang.Integer"><![CDATA[$V{Group1_COUNT}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band splitType="Stretch"/>
	</pageFooter>
	<summary>
		<band splitType="Stretch"/>
	</summary>
</jasperReport>
