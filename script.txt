CREATE TABLE TW_MEDICAL_SERVICE(
  TW_MEDICAL_SERVICE_ID NUMBER,                                                                                                                                                                         
  TITLE VARCHAR2(128) NOT NULL,                     
  COMPANY_ID NUMBER,
  CONSTRAINT PK_MDSERV_COMPANYID PRIMARY KEY (TW_MEDICAL_SERVICE_ID),
  CONSTRAINT FK_MDSERV_COMPID FOREIGN KEY(COMPANY_ID) REFERENCES COMPANY(COMPANY_ID),
  CONSTRAINT UK_MDSERV_TITLE UNIQUE (TITLE)
);
CREATE SEQUENCE SEQ_TW_MEDICAL_SERVICE_ID CACHE 2;

CREATE TABLE TW_MEDICAL_PROCEDURE(
  TW_MEDICAL_PROCEDURE_ID NUMBER,                                                                                                                                                                         
  TITLE VARCHAR2(128) NOT NULL,                     
  COMPANY_ID NUMBER,
  CONSTRAINT PK_MDPROC_COMPANYID PRIMARY KEY (TW_MEDICAL_PROCEDURE_ID),
  CONSTRAINT FK_MDPROC_COMPID FOREIGN KEY(COMPANY_ID) REFERENCES COMPANY(COMPANY_ID),
  CONSTRAINT UK_MDPROC_TITLE UNIQUE (TITLE)
);

CREATE SEQUENCE SEQ_TW_MEDICAL_PROCEDURE_ID CACHE 2;

INSERT INTO TW_MEDICAL_PROCEDURE VALUES(SEQ_TW_MEDICAL_PROCEDURE_ID.NEXTVAL,'ROOT CANAL',1);
INSERT INTO TW_MEDICAL_PROCEDURE VALUES(SEQ_TW_MEDICAL_PROCEDURE_ID.NEXTVAL,'CONSULTANCY',1);
INSERT INTO TW_MEDICAL_PROCEDURE VALUES(SEQ_TW_MEDICAL_PROCEDURE_ID.NEXTVAL,'ONLINE CONSULTANCY',1);
COMMIT;
CREATE TABLE TW_PROCEDURE_FEE(
  TW_PROCEDURE_FEE_ID NUMBER,
  TW_DOCTOR_ID NUMBER NOT NULL,   
  TW_MEDICAL_PROCEDURE_ID NUMBER NOT NULL,
  FEE NUMBER DEFAULT 0,
  DISCOUNT NUMBER DEFAULT 0,
  PREPARED_BY VARCHAR2(64),
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_DOCPROC_FEEID PRIMARY KEY (TW_PROCEDURE_FEE_ID),
  CONSTRAINT FK_DOCPROC_DOCID FOREIGN KEY(TW_DOCTOR_ID) REFERENCES TW_DOCTOR(TW_DOCTOR_ID),
  CONSTRAINT FK_DOCPROC_PROCID FOREIGN KEY(TW_MEDICAL_PROCEDURE_ID) REFERENCES TW_MEDICAL_PROCEDURE(TW_MEDICAL_PROCEDURE_ID),
  CONSTRAINT UK_DOCPROC_PROCDOCID UNIQUE (TW_DOCTOR_ID,TW_MEDICAL_PROCEDURE_ID)
);

CREATE SEQUENCE SEQ_TW_PROCEDURE_FEE_ID CACHE 2;


SELECT * FROM TW_MEDICAL_SERVICE;

SELECT * FROM TW_DOCTOR_CATEGORY;

INSERT INTO TW_DOCTOR_CATEGORY VALUES (SEQ_TW_DOCTOR_CATEGORY_ID.NEXTVAL,'DOCTOR',1);
INSERT INTO TW_DOCTOR_CATEGORY VALUES (SEQ_TW_DOCTOR_CATEGORY_ID.NEXTVAL,'GENERAL PRACTITIONER',1);
INSERT INTO TW_DOCTOR_CATEGORY VALUES (SEQ_TW_DOCTOR_CATEGORY_ID.NEXTVAL,'SPECILIST',1);
INSERT INTO TW_DOCTOR_CATEGORY VALUES (SEQ_TW_DOCTOR_CATEGORY_ID.NEXTVAL,'SURGEON',1);
INSERT INTO TW_DOCTOR_CATEGORY VALUES (SEQ_TW_DOCTOR_CATEGORY_ID.NEXTVAL,'PHYSICIAN',1);
COMMIT;


CREATE TABLE TW_DOCTOR_TYPE(
  TW_DOCTOR_TYPE_ID NUMBER,                                                                                                                                                                         
  TITLE VARCHAR2(128) NOT NULL,                     
  COMPANY_ID NUMBER,
  CONSTRAINT PK_DOCTYP_ID PRIMARY KEY (TW_DOCTOR_TYPE_ID),
  CONSTRAINT FK_DOCTYP_COMPID FOREIGN KEY(COMPANY_ID) REFERENCES COMPANY(COMPANY_ID),
  CONSTRAINT UK_DOCTYP_TITLE UNIQUE (TITLE)
);
CREATE SEQUENCE SEQ_TW_DOCTOR_TYPE_ID CACHE 2;

CREATE TABLE TW_HOSPITAL(
  TW_HOSPITAL_ID NUMBER,                                                                                                                                                                         
  TITLE VARCHAR2(128) NOT NULL,
  ADDRESS VARCHAR2(250),
  PHONE_NO VARCHAR2(32),
  EMAIL VARCHAR2(50),
  MAP_CORDINATES VARCHAR2(128),
  MAP_PLACE_ID VARCHAR2(128),
  COMPANY_ID NUMBER,
  CONSTRAINT PK_HSPTL_ID PRIMARY KEY (TW_HOSPITAL_ID),
  CONSTRAINT FK_HSPTL_COMPID FOREIGN KEY(COMPANY_ID) REFERENCES COMPANY(COMPANY_ID),
  CONSTRAINT UK_HSPTL_TITLE UNIQUE (TITLE)
);
CREATE SEQUENCE SEQ_TW_HOSPITAL_ID CACHE 2;

CREATE TABLE TW_LABORTARY(
  TW_LABORTARY_ID NUMBER,                                                                                                                                                                         
  TITLE VARCHAR2(128) NOT NULL,
  ADDRESS VARCHAR2(250),
  PHONE_NO VARCHAR2(32),
  EMAIL VARCHAR2(50),
  MAP_CORDINATES VARCHAR2(128),
  MAP_PLACE_ID VARCHAR2(128),
  COMPANY_ID NUMBER,
  CONSTRAINT PK_LAB_ID PRIMARY KEY (TW_LABORTARY_ID),
  CONSTRAINT FK_LAB_COMPID FOREIGN KEY(COMPANY_ID) REFERENCES COMPANY(COMPANY_ID),
  CONSTRAINT UK_LAB_TITLE UNIQUE (TITLE)
);
CREATE SEQUENCE SEQ_TW_LABORTARY_ID CACHE 2;


CREATE TABLE TW_LAB_TEST(
  TW_LAB_TEST_ID NUMBER,                                                                                                                                                                         
  TITLE VARCHAR2(128) NOT NULL,
  CONDITION VARCHAR2(16),
  COMPANY_ID NUMBER,
  CONSTRAINT PK_LABTEST_ID PRIMARY KEY (TW_LAB_TEST_ID),
  CONSTRAINT FK_LABTEST_COMPID FOREIGN KEY(COMPANY_ID) REFERENCES COMPANY(COMPANY_ID),
  CONSTRAINT UK_LABTEST_TITLE UNIQUE (TITLE)
);
CREATE SEQUENCE SEQ_TW_LAB_TEST_ID CACHE 2;

CREATE TABLE TW_BLOOD_TYPE(
  TW_BLOOD_TYPE_ID NUMBER,                                                                                                                                                                         
  TITLE VARCHAR2(128) NOT NULL,
  COMPANY_ID NUMBER,
  CONSTRAINT PK_BLDTYP_ID PRIMARY KEY (TW_BLOOD_TYPE_ID),
  CONSTRAINT FK_BLDTYP_COMPID FOREIGN KEY(COMPANY_ID) REFERENCES COMPANY(COMPANY_ID),
  CONSTRAINT UK_BLDTYP_TITLE UNIQUE (TITLE)
);
CREATE SEQUENCE SEQ_TW_BLOOD_TYPE_ID CACHE 2;


CREATE TABLE TW_DOCTOR_CATEGORY(
  TW_DOCTOR_CATEGORY_ID NUMBER,                                                                                                                                                                         
  TITLE VARCHAR2(128) NOT NULL,
  COMPANY_ID NUMBER,
  CONSTRAINT PK_DOCCATG_ID PRIMARY KEY (TW_DOCTOR_CATEGORY_ID),
  CONSTRAINT FK_DOCCATG_COMPID FOREIGN KEY(COMPANY_ID) REFERENCES COMPANY(COMPANY_ID),
  CONSTRAINT UK_DOCCATG_TITLE UNIQUE (TITLE)
);
CREATE SEQUENCE SEQ_TW_DOCTOR_CATEGORY_ID CACHE 2;




CREATE TABLE TW_DISEASE(
  TW_DISEASE_ID NUMBER,                                                                                                                                                                         
  TITLE VARCHAR2(64) NOT NULL,
  COMPANY_ID NUMBER,
  CONSTRAINT PK_DISEASE_ID PRIMARY KEY (TW_DISEASE_ID),
  CONSTRAINT FK_DISEASE_COMPID FOREIGN KEY(COMPANY_ID) REFERENCES COMPANY(COMPANY_ID),
  CONSTRAINT UK_DISEASE_TITLE UNIQUE (TITLE)
);
CREATE SEQUENCE SEQ_TW_DISEASE_ID CACHE 2;

DROP TABLE TW_MEDICINE;

DROP TABLE TW_MEDICINE_DISEASE;

SELECT * FROM USER_CONSTRAINTS WHERE TABLE_NAME = 'TW_MEDICINE';




CREATE TABLE TW_FREQUENCY(
  TW_FREQUENCY_ID NUMBER,                                                                                                                                                                         
  TITLE VARCHAR2(64) NOT NULL,
  COMPANY_ID NUMBER,
  CONSTRAINT PK_FREQ_ID PRIMARY KEY (TW_FREQUENCY_ID),
  CONSTRAINT FK_FREQ_COMPID FOREIGN KEY(COMPANY_ID) REFERENCES COMPANY(COMPANY_ID),
  CONSTRAINT UK_FREQ_TITLE UNIQUE (TITLE)
);
CREATE SEQUENCE SEQ_TW_FREQUENCY_ID CACHE 2;

INSERT INTO TW_FREQUENCY VALUES (SEQ_TW_FREQUENCY_ID.NEXTVAL,'ONCE A DAY',1);
INSERT INTO TW_FREQUENCY VALUES (SEQ_TW_FREQUENCY_ID.NEXTVAL,'TWICE A DAY',1);
INSERT INTO TW_FREQUENCY VALUES (SEQ_TW_FREQUENCY_ID.NEXTVAL,'THRICE A DAY',1);
INSERT INTO TW_FREQUENCY VALUES (SEQ_TW_FREQUENCY_ID.NEXTVAL,'FOUR TIMES A DAY',1);
INSERT INTO TW_FREQUENCY VALUES (SEQ_TW_FREQUENCY_ID.NEXTVAL,'EVERY OTHER DAY',1);
INSERT INTO TW_FREQUENCY VALUES (SEQ_TW_FREQUENCY_ID.NEXTVAL,'ONCE A WEEK',1);
INSERT INTO TW_FREQUENCY VALUES (SEQ_TW_FREQUENCY_ID.NEXTVAL,'TWICE A DAY',1);

COMMIT;

CREATE TABLE TW_DOSE_USAGE(
  TW_DOSE_USAGE_ID NUMBER,                                                                                                                                                                         
  TITLE VARCHAR2(64) NOT NULL,
  COMPANY_ID NUMBER,
  CONSTRAINT PK_DOSEUSGE_ID PRIMARY KEY (TW_DOSE_USAGE_ID),
  CONSTRAINT FK_DOSEUSGE_COMPID FOREIGN KEY(COMPANY_ID) REFERENCES COMPANY(COMPANY_ID),
  CONSTRAINT UK_DOSEUSGE_TITLE UNIQUE (TITLE)
);
CREATE SEQUENCE SEQ_TW_DOSE_USAGE_ID CACHE 2;
INSERT INTO TW_DOSE_USAGE VALUES (SEQ_TW_DOSE_USAGE_ID.NEXTVAL,'Before Food',1);
INSERT INTO TW_DOSE_USAGE VALUES (SEQ_TW_DOSE_USAGE_ID.NEXTVAL,'After Food',1);


CREATE TABLE TW_PATIENT(
  TW_PATIENT_ID NUMBER,                                                                                                                                                                         
  PATIENT_NME VARCHAR2(128) NOT NULL,
  MOBILE_NO VARCHAR2(16) NOT NULL,
  HEALTH_CARD_NO VARCHAR2(32),
  GENDER VARCHAR2(1) DEFAULT 'M',
  AGE NUMBER,
  DOB DATE,
  WEIGHT NUMBER,
  HEIGHT NUMBER,
  ADDRESS VARCHAR2(250),
  ATTEND_CLINIC VARCHAR2(1) DEFAULT 'N',
  TAKE_MEDICINE VARCHAR2(1) DEFAULT 'N',
  TAKE_STEROID VARCHAR2(1) DEFAULT 'N',
  ANY_ALLERGY VARCHAR2(1) DEFAULT 'N',
  ANY_FEVER VARCHAR2(1) DEFAULT 'N',
  SMOKER_IND VARCHAR2(1) DEFAULT 'N',
  COMPANY_ID NUMBER,
  PREPARED_BY VARCHAR2(32),
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_PTNYID_ID PRIMARY KEY (TW_PATIENT_ID),
  CONSTRAINT FK_PTNYID_COMPID FOREIGN KEY(COMPANY_ID) REFERENCES COMPANY(COMPANY_ID),
  CONSTRAINT UK_PTNT_CELLNO UNIQUE (MOBILE_NO),
  CONSTRAINT UK_PTNT_CARDNO UNIQUE (HEALTH_CARD_NO)
);


CREATE SEQUENCE SEQ_TW_PATIENT_ID CACHE 2;

CREATE TABLE TW_DOCTOR(
  TW_DOCTOR_ID NUMBER,                                                                                                                                                                         
  DOCTOR_NME VARCHAR2(128) NOT NULL,
  MOBILE_NO VARCHAR2(16) NOT NULL,
  CNIC VARCHAR2(16),
  GENDER VARCHAR2(1) DEFAULT 'M',
  EMAIL VARCHAR2(20),
  DOB DATE,
  ADDRESS VARCHAR2(250),
  DOCTOR_CATEGORY_ID NUMBER,
  COMPANY_ID NUMBER,
  PREPARED_BY VARCHAR2(32),
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_DOCTORID_ID PRIMARY KEY (TW_DOCTOR_ID),
  CONSTRAINT FK_DOCTORID_COMPID FOREIGN KEY(COMPANY_ID) REFERENCES COMPANY(COMPANY_ID),
  CONSTRAINT UK_DOCTORID_CELLNO UNIQUE (MOBILE_NO),
  CONSTRAINT FK_DOCTORID_CATID FOREIGN KEY(DOCTOR_CATEGORY_ID) REFERENCES TW_DOCTOR_CATEGORY(TW_DOCTOR_CATEGORY_ID)
);

CREATE SEQUENCE SEQ_TW_DOCTOR_ID CACHE 2;



CREATE TABLE TW_DOCTOR_SERVICE(
  TW_DOCTOR_SERVICE_ID NUMBER,                                                                                                                                                                         
  TW_DOCTOR_ID NUMBER,
  TW_DOCTOR_TYPE_ID NUMBER,
  COMPANY_ID NUMBER,
  CONSTRAINT PK_DOCSERVICE_ID PRIMARY KEY (TW_DOCTOR_SERVICE_ID),
  CONSTRAINT FK_DOCSERVICE_COMPID FOREIGN KEY(COMPANY_ID) REFERENCES COMPANY(COMPANY_ID),
  CONSTRAINT FK_DOCSERVICE_DOCID FOREIGN KEY(TW_DOCTOR_ID) REFERENCES TW_DOCTOR(TW_DOCTOR_ID),
  CONSTRAINT FK_DOCSERVICE_TYPID FOREIGN KEY(TW_DOCTOR_TYPE_ID) REFERENCES TW_DOCTOR_TYPE(TW_DOCTOR_TYPE_ID)
);

CREATE SEQUENCE SEQ_TW_DOCTOR_SERVICE_ID CACHE 2;


SELECT UPPER(USER_NME) FROM TW_WEB_USERS ORDER BY 1 DESC;

SELECT * FROM TW_WEB_USERS  ;

CREATE TABLE TW_WEB_USERS(
USER_NME VARCHAR2(64) NOT NULL,
USER_PASSWORD VARCHAR2(64) NOT NULL,
ACTIVE_IND VARCHAR2(1) DEFAULT 'Y',
FIRST_NME VARCHAR2(32),
LAST_NME VARCHAR2(32),
EMAIL VARCHAR2(32),
COMPANY_ID NUMBER,
TW_DOCTOR_ID NUMBER,
TW_PATIENT_ID NUMBER,
TW_HOSPITAL_ID NUMBER,
TW_PHARMACEUTICAL_ID NUMBER,
CONSTRAINT PK_TWWEBUSERS_NME PRIMARY KEY (USER_NME),
CONSTRAINT FK_TWWU_DOCTORID FOREIGN KEY(TW_DOCTOR_ID) REFERENCES TW_DOCTOR(TW_DOCTOR_ID),
CONSTRAINT FK_TWWU_PATIENTID FOREIGN KEY(TW_PATIENT_ID) REFERENCES TW_PATIENT(TW_PATIENT_ID),
CONSTRAINT FK_TWWU_HOSPITALID FOREIGN KEY(TW_HOSPITAL_ID) REFERENCES TW_HOSPITAL(TW_HOSPITAL_ID),
CONSTRAINT FK_TWWU_PHARMAID FOREIGN KEY(TW_PHARMACEUTICAL_ID) REFERENCES TW_PHARMACEUTICAL(TW_PHARMACEUTICAL_ID)
);


INSERT INTO TW_WEB_USERS VALUES ('super_user','4b4985957139682375c9ad8dd5de6583','Y','SUPER','USER',NULL,1,NULL,NULL,NULL);

COMMIT;




CREATE TABLE TW_APPOINTMENT(
  TW_APPOINTMENT_ID NUMBER,                                                                                                                                                                         
  TW_DOCTOR_ID NUMBER NOT NULL,
  TW_PATIENT_ID NUMBER NOT NULL,
  TW_CLINIC_ID NUMBER NOT NULL,
  APPOINTMENT_DTE DATE NOT NULL,
  APPOINTMENT_TIME DATE NOT NULL,
  STATUS_IND VARCHAR2(1) DEFAULT 'P',
  REMARKS  VARCHAR2(500),
  STATUS_UPDATED_ON DATE,
  STATUS_UPDATED_BY VARCHAR2(64),
  COMPANY_ID NUMBER,
  PREPARED_BY VARCHAR2(64),
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_APPOINTMNT_ID PRIMARY KEY (TW_APPOINTMENT_ID),
  CONSTRAINT FK_APPOINTMNT_COMPID FOREIGN KEY(COMPANY_ID) REFERENCES COMPANY(COMPANY_ID),
  CONSTRAINT FK_APPOINTMNT_DOCID FOREIGN KEY(TW_DOCTOR_ID) REFERENCES TW_DOCTOR(TW_DOCTOR_ID),
  CONSTRAINT FK_APPOINTMNT_CLNCID FOREIGN KEY(TW_CLINIC_ID) REFERENCES TW_CLINIC(TW_CLINIC_ID),
  CONSTRAINT FK_APPOINTMNT_PTNTID FOREIGN KEY(TW_PATIENT_ID) REFERENCES TW_PATIENT(TW_PATIENT_ID)
);


CREATE SEQUENCE SEQ_TW_APPOINTMENT_ID CACHE 2;



SELECT AP.TW_APPOINTMENT_ID,AP.TW_DOCTOR_ID,AP.TW_PATIENT_ID,TO_CHAR(AP.APPOINTMENT_DTE,'DD-MM-YYYY') APPOINTMENT_DTE,
TO_CHAR(AP.APPOINTMENT_TIME,'HH24:MI') APPOINTMENT_TIME,PAT.PATIENT_NME,PAT.MOBILE_NO
FROM TW_APPOINTMENT AP,TW_PATIENT PAT
WHERE AP.TW_DOCTOR_ID=15
AND AP.TW_PATIENT_ID=PAT.TW_PATIENT_ID
ORDER BY AP.APPOINTMENT_TIME ASC
;




SELECT * FROM TW_DOCTOR_CLINIC;
DROP TABLE TW_MEDICINE;



CREATE SEQUENCE SEQ_TW_PHARMA_PRODUCT_ID CACHE 2;






CREATE TABLE TW_CLINIC(
  TW_CLINIC_ID NUMBER,
  CLINIC_NME VARCHAR2(128) NOT NULL,
  PHONE_NO VARCHAR2(16),
  MAP_COORDINATES VARCHAR2(32),
  ADDRESS VARCHAR2(250),
  COMPANY_ID NUMBER,
  PREPARED_BY VARCHAR2(32),
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_CLINIC_ID PRIMARY KEY (TW_CLINIC_ID),
  CONSTRAINT FK_CLINIC_COMPID FOREIGN KEY(COMPANY_ID) REFERENCES COMPANY(COMPANY_ID),
  CONSTRAINT UK_CLINIC_CLINICNME UNIQUE (CLINIC_NME)
);

CREATE SEQUENCE SEQ_TW_CLINIC_ID CACHE 2;



CREATE TABLE TW_DOCTOR_CLINIC(
  TW_DOCTOR_CLINIC_ID NUMBER,
  TW_DOCTOR_ID NUMBER NOT NULL,   
  TW_CLINIC_ID NUMBER NOT NULL,
  TIME_FROM DATE,
  TIME_TO DATE,
  REMARKS VARCHAR2(250),
  PREPARED_BY VARCHAR2(64),
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_DOCCLINIC_ID PRIMARY KEY (TW_DOCTOR_CLINIC_ID),
  CONSTRAINT FK_DOCCLINIC_DOCID FOREIGN KEY(TW_DOCTOR_ID) REFERENCES TW_DOCTOR(TW_DOCTOR_ID),
  CONSTRAINT FK_DOCCLINIC_CLINICID FOREIGN KEY(TW_CLINIC_ID) REFERENCES TW_CLINIC(TW_CLINIC_ID)
);

CREATE SEQUENCE SEQ_TW_DOCTOR_CLINIC_ID CACHE 2;

SELECT * FROM TW_DOCTOR_CLINIC;

update TW_WEB_USERS SET USER_PASSWORD='4b4985957139682375c9ad8dd5de6583';
commit;
rollback;

SELECT * FROM  TW_RIGHTS;

CREATE TABLE TW_RIGHTS(
RIGHT_NME VARCHAR2(64) NOT NULL,
PARENT_ID NUMBER,
URL VARCHAR2(164),
SORT NUMBER,
RIGHT_TXT VARCHAR2(64),
RIGHT_ID NUMBER,
CAN_VIEW VARCHAR2(1) DEFAULT 'Y',
MODULE_ID NUMBER,
ICON_NME VARCHAR2(32),
CONSTRAINT PK_TWRIGHTS_NME PRIMARY KEY (RIGHT_NME)
);
CREATE SEQUENCE SEQ_TW_RIGHTS_ID CACHE 2;

COMMIT;

SELECT * FROM TW_RIGHTS ORDER BY SORT DESC;

ALTER TABLE TW_RIGHTS ADD ICON_NME VARCHAR2(32);
UPDATE TW_RIGHTS SET ICON_NME='icon-settings' WHERE RIGHT_ID=13;

INSERT INTO TW_RIGHTS VALUES ('Admin Panel',0,'#',1,'Admin Panel',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,'icon-settings');
INSERT INTO TW_RIGHTS VALUES ('Doctors',13,'setup.htm?action=addDoctor',2,'Doctors',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1);
INSERT INTO TW_RIGHTS VALUES ('Patients',13,'setup.htm?action=addPatient',3,'Patients',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1);
INSERT INTO TW_RIGHTS VALUES ('Clinics',13,'setup.htm?action=addClinic',4,'Clinics',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1);
INSERT INTO TW_RIGHTS VALUES ('Pharmaceutical',13,'setup.htm?action=addPharma',5,'Pharmaceutical',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1);
INSERT INTO TW_RIGHTS VALUES ('Doctor Clinics',13,'setup.htm?action=assignClinicToDoctor',6,'Doctor Clinics',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1);

INSERT INTO TW_RIGHTS VALUES ('User Management',0,'#',6.5,'User Management',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,'fa fa-user-md');
INSERT INTO TW_RIGHTS VALUES ('Users',27,'ums.htm?action=viewUsers',6.6,'Users',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);
INSERT INTO TW_RIGHTS VALUES ('User Rights',27,'ums.htm?action=assignUserRights',6.7,'User Rights',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);

INSERT INTO TW_RIGHTS VALUES ('Setup',0,'#',7,'Setup',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,'fa fa-sliders');
INSERT INTO TW_RIGHTS VALUES ('Medicine',30,'setup.htm?action=viewMedicine',7.1,'Medicine',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);
INSERT INTO TW_RIGHTS VALUES ('View Clinics',30,'setup.htm?action=viewDoctorClinics',7.2,'View Clinics',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);
INSERT INTO TW_RIGHTS VALUES ('Message Templates',30,'setup.htm?action=viewMessageTemplates',7.3,'Message Templates',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);
INSERT INTO TW_RIGHTS VALUES ('Send Messages',30,'setup.htm?action=sendMessage',7.4,'Send Messages',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);


INSERT INTO TW_RIGHTS VALUES ('Clinic Management',0,'#',7,'Clinic Management',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,'fa fa-h-square');
INSERT INTO TW_RIGHTS VALUES ('Add Appointment',19,'performa.htm?action=addAppointment',8,'Add Appointment',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);
INSERT INTO TW_RIGHTS VALUES ('Appointments Summary',19,'performa.htm?action=viewAppointments',9,'Appointments Summary',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);
INSERT INTO TW_RIGHTS VALUES ('Prescription',19,'performa.htm?action=addPrescription',10,'Prescription',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);
INSERT INTO TW_RIGHTS VALUES ('Prescription History',19,'performa.htm?action=addPrescription',11,'Prescription History',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);
INSERT INTO TW_RIGHTS VALUES ('Doctor Services',19,'performa.htm?action=addDoctorServices',12,'Doctor Services',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);


INSERT INTO TW_RIGHTS VALUES ('Pharma Management',0,'#',12,'Pharma Management',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,'fa fa-medkit');
INSERT INTO TW_RIGHTS VALUES ('Add Product',24,'setup.htm?action=addProduct',13,'Add Product',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);

INSERT INTO TW_RIGHTS VALUES ('Blood Donor',0,'#',14,'Blood Donor',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,'fa fa-heartbeat');
INSERT INTO TW_RIGHTS VALUES ('Add Donor',37,'setup.htm?action=addBloodDonor',15,'Add Donor',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);
INSERT INTO TW_RIGHTS VALUES ('Intake Diseases',11,'clinic.htm?action=intakeDiseases',60,'Intake Diseases',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);


SELECT * FROM TW_WEB_USERS;
DESC TW_DOCTOR_SERVICE;

SELECT * FROM TW_DOCTOR;
SELECT * FROM TW_DOCTOR_TYPE;

INSERT INTO TW_DOCTOR_SERVICE(TW_DOCTOR_SERVICE_ID,TW_DOCTOR_ID,TW_DOCTOR_TYPE_ID,COMPANY_ID)
SELECT SEQ_TW_DOCTOR_SERVICE_ID.NEXTVAL,15,TW_DOCTOR_TYPE_ID,COMPANY_ID FROM TW_DOCTOR_TYPE;

COMMIT;


SELECT TDC.TW_DOCTOR_CLINIC_ID,TDC.TW_DOCTOR_ID,TDC.TW_CLINIC_ID,TO_CHAR(TDC.TIME_FROM,'HH24:MI') TIME_FROM, TO_CHAR(TDC.TIME_TO,'HH24:MI') TIME_TO,TDC.REMARKS,TD.DOCTOR_NME  
FROM TW_DOCTOR_CLINIC TDC,TW_DOCTOR TD 
WHERE TDC.TW_DOCTOR_ID=TD.TW_DOCTOR_ID AND TDC.TW_CLINIC_ID=4  ORDER BY TDC.TW_DOCTOR_CLINIC_ID DESC;


CREATE TABLE TW_MEDICAL_DEGREE(
  TW_MEDICAL_DEGREE_ID NUMBER,                                                                                                                                                                         
  TITLE VARCHAR2(128) NOT NULL,                     
  CONSTRAINT PK_MDDGREE_COMPANYID PRIMARY KEY (TW_MEDICAL_DEGREE_ID),
  CONSTRAINT UK_MDDGREE_TITLE UNIQUE (TITLE)
);
CREATE SEQUENCE SEQ_TW_MEDICAL_DEGREE_ID CACHE 2;



CREATE TABLE TW_INSTITUTION(
  TW_INSTITUTION_ID NUMBER,                                                                                                                                                         
  TITLE VARCHAR2(128) NOT NULL,
  COUNTRY_ID NUMBER,
  CONSTRAINT PK_INST_ID PRIMARY KEY (TW_INSTITUTION_ID),
  CONSTRAINT FK_INST_COUNTRYID FOREIGN KEY(COUNTRY_ID) REFERENCES COUNTRY(COUNTRY_ID),
  CONSTRAINT UK_INST_TITLE UNIQUE (TITLE)
);
CREATE SEQUENCE SEQ_TW_INSTITUTION_ID CACHE 2;

ALTER TABLE TW_WEB_USERS DROP COLUMN LAST_NME;

CREATE TABLE TW_PHARMACEUTICAL(
  TW_PHARMACEUTICAL_ID NUMBER,   
  COMPANY_NME VARCHAR2(128) NOT NULL,
  CONTACT_PERSON VARCHAR2(128) NOT NULL,
  MOBILE_NO VARCHAR2(16) NOT NULL,
  DESIGNATION VARCHAR2(32),
  EMAIL VARCHAR2(20),
  LANDLINE_NO VARCHAR2(16),
  ADDRESS VARCHAR2(250),
  COMPANY_ID NUMBER,
  PREPARED_BY VARCHAR2(32),
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_PHARMA_ID PRIMARY KEY (TW_PHARMACEUTICAL_ID),
  CONSTRAINT FK_PHARMA_COMPID FOREIGN KEY(COMPANY_ID) REFERENCES COMPANY(COMPANY_ID),
  CONSTRAINT UK_PHARMA_COMPNME UNIQUE (COMPANY_NME)
);

CREATE SEQUENCE SEQ_TW_PHARMACEUTICAL_ID CACHE 2;

CREATE TABLE TW_PHARMA_PRODUCT(
  TW_PHARMA_PRODUCT_ID NUMBER,
  TW_PHARMACEUTICAL_ID NUMBER,
  PRODUCT_NME VARCHAR2(164) NOT NULL,
  GENERIC_NME VARCHAR2(164),
  PRODUCT_TYPE VARCHAR2(16),
  REMARKS VARCHAR2(250),
  PREPARED_BY VARCHAR2(64),
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_PHRMAPROD_ID PRIMARY KEY (TW_PHARMA_PRODUCT_ID),
  CONSTRAINT FK_PHRMAPROD_COMPID FOREIGN KEY(TW_PHARMACEUTICAL_ID) REFERENCES TW_PHARMACEUTICAL(TW_PHARMACEUTICAL_ID),
  CONSTRAINT FK_PHRMAPROD_PRPRDBY FOREIGN KEY(PREPARED_BY) REFERENCES TW_WEB_USERS(USER_NME),
  CONSTRAINT UK_PHRMAPROD_NME UNIQUE (PRODUCT_NME)
);
CREATE SEQUENCE SEQ_TW_PHARMA_PRODUCT CACHE 2;


CREATE TABLE TW_PHARMA_PROD_DISEASE(
  TW_PHARMA_PROD_DISEASE_ID NUMBER,
  TW_PHARMA_PRODUCT_ID NUMBER,   
  TW_DISEASE_ID NUMBER,
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_PHRMAPRODDIS_ID PRIMARY KEY (TW_PHARMA_PROD_DISEASE_ID),
  CONSTRAINT FK_PHRMAPRODDIS_PRODID FOREIGN KEY(TW_PHARMA_PRODUCT_ID) REFERENCES TW_PHARMA_PRODUCT(TW_PHARMA_PRODUCT_ID)
);

CREATE SEQUENCE SEQ_TW_PHARMA_PROD_DISEASE_ID CACHE 2;

CREATE TABLE TW_MEDICINE(
  TW_MEDICINE_ID NUMBER,
  PRODUCT_NME VARCHAR2(164) NOT NULL,
  GENERIC_NME VARCHAR2(164),
  MANFUCATURER VARCHAR2(164),
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_MEDICINE_ID PRIMARY KEY (TW_MEDICINE_ID),
  CONSTRAINT UK_MEDICINE_PRODNME UNIQUE (PRODUCT_NME)
);

CREATE TABLE TW_DOCTOR_MEDICINE(
  TW_DOCTOR_MEDICINE_ID NUMBER,                                                                                                                                                                         
  TW_DOCTOR_ID NULL,
  TW_MEDICINE_ID NULL,
  PREPARED_BY VARCHAR2(64),
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_DOCMED_ID PRIMARY KEY (TW_DOCTOR_MEDICINE_ID),
  CONSTRAINT FK_DOCMED_DOCID FOREIGN KEY(TW_DOCTOR_ID) REFERENCES TW_DOCTOR(TW_DOCTOR_ID),
  CONSTRAINT FK_DOCMED_MEDID FOREIGN KEY(TW_MEDICINE_ID) REFERENCES TW_MEDICINE(TW_MEDICINE_ID),
  CONSTRAINT UK_DOCMED_DOCMED UNIQUE (TW_DOCTOR_ID,TW_MEDICINE_ID)
);
CREATE SEQUENCE SEQ_TW_DOCTOR_MEDICINE_ID CACHE 2;


CREATE TABLE TW_USER_RIGHT(
TW_USER_RIGHT_ID NUMBER,
USER_NME VARCHAR2(64) NOT NULL,
RIGHT_NME VARCHAR2(64) NOT NULL,
CAN_ADD VARCHAR2(1),
CAN_EDIT VARCHAR2(1),
CAN_DELETE VARCHAR2(1),
CONSTRAINT PK_TWUSRRGHT_ID PRIMARY KEY (TW_USER_RIGHT_ID),
CONSTRAINT FK_TWUSRRGHT_USRNME FOREIGN KEY(USER_NME) REFERENCES TW_WEB_USERS(USER_NME),
CONSTRAINT FK_WUSRRGHT_RIGHTNME FOREIGN KEY(RIGHT_NME) REFERENCES TW_RIGHTS(RIGHT_NME)
);
CREATE SEQUENCE SEQ_TW_USER_RIGHT_ID CACHE 2;



INSERT INTO TW_USER_RIGHT (TW_USER_RIGHT_ID,USER_NME,RIGHT_NME,CAN_ADD,CAN_EDIT,CAN_DELETE)
SELECT SEQ_TW_USER_RIGHT_ID.NEXTVAL,'super_user',RIGHT_NME,'Y','Y','Y' FROM TW_RIGHTS WHERE PARENT_ID<>0
;

CREATE TABLE TW_PRESCRIPTION_MASTER(
  TW_PRESCRIPTION_MASTER_ID NUMBER,                                                                                                                                                                         
  TW_DOCTOR_ID NUMBER NOT NULL,
  TW_PATIENT_ID NUMBER NOT NULL,
  TW_CLINIC_ID NUMBER,
  REMARKS VARCHAR2(1000),
  PREPARED_BY VARCHAR2(64),
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_PRESCMSTR_ID PRIMARY KEY (TW_PRESCRIPTION_MASTER_ID),
  CONSTRAINT FK_PRESCMSTR_DOCID FOREIGN KEY(TW_DOCTOR_ID) REFERENCES TW_DOCTOR(TW_DOCTOR_ID),
  CONSTRAINT FK_PRESCMSTR_CLINCID FOREIGN KEY(TW_CLINIC_ID) REFERENCES TW_CLINIC(TW_CLINIC_ID),
  CONSTRAINT FK_PRESCMSTR_PTNTID FOREIGN KEY(TW_PATIENT_ID) REFERENCES TW_PATIENT(TW_PATIENT_ID)
);
CREATE SEQUENCE SEQ_TW_PRESCRIPTION_MASTER_ID CACHE 2;
CREATE TABLE TW_PRESCRIPTION_DETAIL(
  TW_PRESCRIPTION_DETAIL_ID NUMBER,
  TW_PRESCRIPTION_MASTER_ID NUMBER,                                                                                                                                                                         
  TW_MEDICINE_ID NUMBER,
  TW_LAB_TEST_ID NUMBER,
  DAYS NUMBER DEFAULT 1,
  QTY NUMBER DEFAULT 1,
  TW_FREQUENCY_ID NUMBER,
  TW_DOSE_USAGE_ID NUMBER,
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_PRESCDTL_ID PRIMARY KEY (TW_PRESCRIPTION_DETAIL_ID),
  CONSTRAINT FK_PRESCDTL_MSTRID FOREIGN KEY(TW_PRESCRIPTION_MASTER_ID) REFERENCES TW_PRESCRIPTION_MASTER(TW_PRESCRIPTION_MASTER_ID),
  CONSTRAINT FK_PRESCDTL_CLINCID FOREIGN KEY(TW_MEDICINE_ID) REFERENCES TW_MEDICINE(TW_MEDICINE_ID),
  CONSTRAINT FK_PRESCDTL_TESTID FOREIGN KEY(TW_LAB_TEST_ID) REFERENCES TW_LAB_TEST(TW_LAB_TEST_ID),
  CONSTRAINT FK_PRESCDTL_FRQID FOREIGN KEY(TW_FREQUENCY_ID) REFERENCES TW_FREQUENCY(TW_FREQUENCY_ID),
  CONSTRAINT FK_PRESCDTL_USAGEID FOREIGN KEY(TW_DOSE_USAGE_ID) REFERENCES TW_DOSE_USAGE(TW_DOSE_USAGE_ID)
);
CREATE SEQUENCE SEQ_TW_PRESCRIPTION_DETAIL_ID CACHE 2;

CREATE TABLE TW_PRESCRIPTION_MASTER(
  TW_PRESCRIPTION_MASTER_ID NUMBER,                                                                                                                                                                         
  TW_DOCTOR_ID NUMBER NOT NULL,
  TW_PATIENT_ID NUMBER NOT NULL,
  TW_CLINIC_ID NUMBER,
  REMARKS VARCHAR2(1000),
  PREPARED_BY VARCHAR2(64),
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_PRESCMSTR_ID PRIMARY KEY (TW_PRESCRIPTION_MASTER_ID),
  CONSTRAINT FK_PRESCMSTR_DOCID FOREIGN KEY(TW_DOCTOR_ID) REFERENCES TW_DOCTOR(TW_DOCTOR_ID),
  CONSTRAINT FK_PRESCMSTR_CLINCID FOREIGN KEY(TW_CLINIC_ID) REFERENCES TW_CLINIC(TW_CLINIC_ID),
  CONSTRAINT FK_PRESCMSTR_PTNTID FOREIGN KEY(TW_PATIENT_ID) REFERENCES TW_PATIENT(TW_PATIENT_ID)
);
CREATE SEQUENCE SEQ_TW_PRESCRIPTION_MASTER_ID CACHE 2;
CREATE TABLE TW_PRESCRIPTION_DETAIL(
  TW_PRESCRIPTION_DETAIL_ID NUMBER,
  TW_PRESCRIPTION_MASTER_ID NUMBER,                                                                                                                                                                         
  TW_MEDICINE_ID NUMBER,
  TW_LAB_TEST_ID NUMBER,
  TW_LABORTARY_ID NUMBER,
  DAYS NUMBER DEFAULT 1,
  QTY NUMBER DEFAULT 1,
  TW_FREQUENCY_ID NUMBER,
  TW_DOSE_USAGE_ID NUMBER,
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_PRESCDTL_ID PRIMARY KEY (TW_PRESCRIPTION_DETAIL_ID),
  CONSTRAINT FK_PRESCDTL_MSTRID FOREIGN KEY(TW_PRESCRIPTION_MASTER_ID) REFERENCES TW_PRESCRIPTION_MASTER(TW_PRESCRIPTION_MASTER_ID),
  CONSTRAINT FK_PRESCDTL_CLINCID FOREIGN KEY(TW_MEDICINE_ID) REFERENCES TW_MEDICINE(TW_MEDICINE_ID),
  CONSTRAINT FK_PRESCDTL_TESTID FOREIGN KEY(TW_LAB_TEST_ID) REFERENCES TW_LAB_TEST(TW_LAB_TEST_ID),
  CONSTRAINT FK_PRESCDTL_LABID FOREIGN KEY(TW_LABORTARY_ID) REFERENCES TW_LABORTARY(TW_LABORTARY_ID),
  CONSTRAINT FK_PRESCDTL_FRQID FOREIGN KEY(TW_FREQUENCY_ID) REFERENCES TW_FREQUENCY(TW_FREQUENCY_ID),
  CONSTRAINT FK_PRESCDTL_USAGEID FOREIGN KEY(TW_DOSE_USAGE_ID) REFERENCES TW_DOSE_USAGE(TW_DOSE_USAGE_ID)
);
CREATE SEQUENCE SEQ_TW_PRESCRIPTION_DETAIL_ID CACHE 2;


ALTER TABLE TW_APPOINTMENT ADD TW_PRESCRIPTION_MASTER_ID NUMBER;


INSERT INTO RIGHTS VALUES ('Process Salary',39,'hr.htm?action=processSalary',21,'Process Salary',SEQ_RIGHTS_ID.NEXTVAL,'Y',3,NULL,NULL);
commit;
-------------------------31-oct-17

CREATE TABLE TW_HEALTH_CARD(
  TW_HEALTH_CARD_ID NUMBER,                                                                                                                                                                   
  CARD_NME VARCHAR2(64),
  PRICE NUMBER DEFAULT 0,
  DOCTOR_DISC NUMBER,
  VISITS_ALLOWED NUMBER,
  PRODUCT_DISC NUMBER,
  ACTIVE_IND VARCHAR2(1) DEFAULT 'Y',
  DESCRIPTION VARCHAR2(500),
  AVAILABLE_FOR VARCHAR2(64),
  PREPARED_BY VARCHAR2(64),
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_HLTHCARD_ID PRIMARY KEY (TW_HEALTH_CARD_ID),
  CONSTRAINT FK_HLTHCARD_PRPRDID FOREIGN KEY(PREPARED_BY) REFERENCES TW_WEB_USERS(USER_NME)
);
CREATE SEQUENCE SEQ_TW_HEALTH_CARD_ID CACHE 2;

INSERT INTO TW_RIGHTS VALUES ('Health Card',2,'performa.htm?action=viewHealthCards',7,'Health Card',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);
ALTER TABLE TW_DOCTOR ADD TW_MEDICAL_DEGREE_ID NUMBER;



CREATE TABLE TW_MEDICAL_DEGREE(
  TW_MEDICAL_DEGREE_ID NUMBER,                                                                                                                                                                         
  TITLE VARCHAR2(128) NOT NULL,
  ABBREV VARCHAR2(8) ,
  CONSTRAINT PK_MDCLCATG_ID PRIMARY KEY (TW_MEDICAL_DEGREE_ID),
  CONSTRAINT UK_MDCLCATG_TITLE UNIQUE (TITLE)
);
CREATE SEQUENCE SEQ_TW_MEDICAL_DEGREE_ID CACHE 2;

CREATE TABLE TW_PATIENT_HEALTH_CARD(
  TW_PATIENT_HEALTH_CARD_ID NUMBER,
  TW_HEALTH_CARD_ID NUMBER NOT NULL,
  TW_PATIENT_ID NUMBER NOT NULL,
  CARD_NO VARCHAR2(16),
  ISSUE_DTE DATE DEFAULT SYSDATE,
  EXPIRY_DTE DATE,
  ACTIVE_IND VARCHAR2(1) DEFAULT 'Y',
  PREPARED_BY VARCHAR2(64),
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_PTNTCARD_ID PRIMARY KEY (TW_PATIENT_HEALTH_CARD_ID),
  CONSTRAINT FK_PTNTCARD_PTNTID FOREIGN KEY(TW_PATIENT_ID) REFERENCES TW_PATIENT(TW_PATIENT_ID),
  CONSTRAINT FK_PTNTCARD_HLTDCRDID FOREIGN KEY(TW_HEALTH_CARD_ID) REFERENCES TW_HEALTH_CARD(TW_HEALTH_CARD_ID),
  CONSTRAINT FK_PTNTCARD_PRPRDID FOREIGN KEY(PREPARED_BY) REFERENCES TW_WEB_USERS(USER_NME)
);

CREATE SEQUENCE SEQ_TW_PATIENT_HEALTH_CARD_ID CACHE 2;


INSERT INTO TW_MEDICAL_DEGREE VALUES(SEQ_TW_MEDICAL_DEGREE_ID.NEXTVAL,'Bachelor of Medicine and Bachelor of Surgery','MBBS');

ALTER TABLE TW_DOCTOR MODIFY  EMAIL VARCHAR2(64);
ALTER TABLE TW_DOCTOR ADD  EXPERIENCE NUMBER;

ALTER TABLE TW_APPOINTMENT ADD TW_PRESCRIPTION_MASTER_ID NUMBER;

INSERT INTO TW_RIGHTS VALUES ('Sale Health Card',11,'setup.htm?action=saleHealthCards',20,'Sale Health Card',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);

CREATE TABLE TW_LAB_TEST(
  TW_LAB_TEST_ID NUMBER,                                                                                                                                                                         
  TITLE VARCHAR2(128) NOT NULL,
  CONSTRAINT PK_LABTEST_ID PRIMARY KEY (TW_LAB_TEST_ID),
  CONSTRAINT UK_LABTEST_TITLE UNIQUE (TITLE)
);
CREATE SEQUENCE SEQ_TW_LAB_TEST_ID CACHE 2;

DROP TABLE TW_LAB_TEST;
ALTER TABLE TW_APPOINTMENT ADD APPOINTMENT_NO NUMBER;

--------------01-NOV-17
UPDATE TW_RIGHTS SET URL='clinic.htm?action=prescriptionListing' where right_id=18;
ALTER TABLE TW_PRESCRIPTION_MASTER ADD DTE DATE DEFAULT SYSDATE;


---------------04/NOV/2017

CREATE TABLE TW_PATIENT_DISEASE(
  TW_PATIENT_DISEASE_ID NUMBER,
  TW_DISEASE_ID NUMBER,
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_PTNTDISEASE_ID PRIMARY KEY (TW_PATIENT_DISEASE_ID),
  CONSTRAINT FK_PTNTDISEASE_DISID FOREIGN KEY(TW_DISEASE_ID) REFERENCES TW_DISEASE(TW_DISEASE_ID)
);
CREATE SEQUENCE SEQ_TW_PATIENT_DISEASE_ID CACHE 2;

CREATE TABLE TW_COMPANY(
  TW_COMPANY_ID NUMBER,
  COMPANY_NME VARCHAR2(64) NOT NULL,
  CONTACT_PERSON VARCHAR2(64),
  EMAIL VARCHAR2(64),
  PHONE_NO VARCHAR2(16),
  ADDRESS VARCHAR2(128),
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_TWCOMP_ID PRIMARY KEY (TW_COMPANY_ID)
);
CREATE SEQUENCE SEQ_TW_COMPANY_ID CACHE 2;

CREATE TABLE TW_DOCTOR_COMPANY(
  TW_DOCTOR_COMPANY_ID NUMBER,
  TW_COMPANY_ID NUMBER,
  TW_DOCTOR_ID NUMBER,
  ACTIVE_IND VARCHAR2(1) DEFAULT 'Y',
  EXPIRY_DTE DATE,
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_TWDOCCOMP_ID PRIMARY KEY (TW_DOCTOR_COMPANY_ID),
  CONSTRAINT FK_TWDOCCOMP_COMPID FOREIGN KEY(TW_COMPANY_ID) REFERENCES TW_COMPANY(TW_COMPANY_ID)
);
CREATE SEQUENCE SEQ_TW_DOCTOR_COMPANY_ID CACHE 2;

ALTER TABLE TW_PATIENT ADD TW_COMPANY_ID NUMBER;
ALTER TABLE TW_PATIENT ADD CONSTRAINT FK_TWDPTNT_COMPID FOREIGN KEY(TW_COMPANY_ID) REFERENCES TW_COMPANY(TW_COMPANY_ID);
ALTER TABLE TW_PROCEDURE_FEE ADD TW_COMPANY_ID NUMBER;
ALTER TABLE TW_PROCEDURE_FEE ADD CONSTRAINT FK_TWDPROC_COMPID FOREIGN KEY(TW_COMPANY_ID) REFERENCES TW_COMPANY(TW_COMPANY_ID);

INSERT INTO TW_RIGHTS VALUES ('Panel Company',2,'setup.htm?action=addCompany',24,'Panel Company',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);

INSERT INTO TW_RIGHTS VALUES ('Doctor Panel Company',2,'setup.htm?action=assignPanelCompany',25,'Doctor Panel Company',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);


ALTER TABLE TW_PATIENT ADD EXPIRY_DTE DATE;

ALTER TABLE TW_PATIENT ADD EMAIL VARCHAR2(64);

INSERT INTO TW_RIGHTS VALUES ('Panel Patient',11,'setup.htm?action=addPanelPatient',26,'Panel Patient',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);

CREATE TABLE TW_DOCTOR_ATTACHMENT(
  TW_DOCTOR_ATTACHMENT_ID NUMBER,
  TW_DOCTOR_ID NUMBER NOT NULL,
  FILE_NME VARCHAR2(128) NOT NULL,
  FILE_DESC VARCHAR2(128),
  ATTACHMENT_TYP VARCHAR2(16),
  PREPARED_BY VARCHAR2(64),
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_TWDOCATT_ID PRIMARY KEY (TW_DOCTOR_ATTACHMENT_ID),
  CONSTRAINT FK_TWDOCATT_DOCID FOREIGN KEY(TW_DOCTOR_ID) REFERENCES TW_DOCTOR(TW_DOCTOR_ID)
);

CREATE SEQUENCE SEQ_TW_DOCTOR_ATTACHMENT_ID CACHE 2;

ALTER TABLE TW_PATIENT DROP COLUMN EXPIRY_DTE;

INSERT INTO TW_RIGHTS VALUES ('Doctor Profile',11,'clinic.htm?action=addDoctorProfile',21,'Doctor Profile',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);

CREATE TABLE TW_MEDICAL_COLLEGE(
  TW_MEDICAL_COLLEGE_ID NUMBER,
  TITLE VARCHAR2(164) NOT NULL,
  COUNTRY_ID NUMBER,
  CITY_ID NUMBER,
  CONSTRAINT PK_TWMDCLCOLLGE_ID PRIMARY KEY (TW_MEDICAL_COLLEGE_ID),
  CONSTRAINT FK_TWMDCLCOLLGE_CNTRYID FOREIGN KEY(COUNTRY_ID) REFERENCES COUNTRY(COUNTRY_ID),
  CONSTRAINT FK_TWMDCLCOLLGE_CTYID FOREIGN KEY(CITY_ID) REFERENCES CITY(CITY_ID)
);
CREATE SEQUENCE SEQ_TW_MEDICAL_COLLEGE_ID CACHE 2;

ALTER TABLE TW_MEDICAL_COLLEGE ADD WEB_URL VARCHAR2(128);
ALTER TABLE TW_MEDICAL_COLLEGE ADD LOGO_NME VARCHAR2(128);

CREATE TABLE TW_DOCTOR_EDUCATION(
  TW_DOCTOR_EDUCATION_ID NUMBER,
  TW_DOCTOR_ID NUMBER NOT NULL,
  TW_MEDICAL_DEGREE_ID NUMBER,
  TW_MEDICAL_COLLEGE_ID NUMBER,
  DATE_FROM DATE,
  DATE_TO DATE,
  PREPARED_BY VARCHAR2(64),
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_TWDOCEDU_ID PRIMARY KEY (TW_DOCTOR_EDUCATION_ID),
  CONSTRAINT FK_TWDOCEDU_DOCID FOREIGN KEY(TW_DOCTOR_ID) REFERENCES TW_DOCTOR(TW_DOCTOR_ID),
  CONSTRAINT FK_TWDOCEDU_DEGID FOREIGN KEY(TW_MEDICAL_DEGREE_ID) REFERENCES TW_MEDICAL_DEGREE(TW_MEDICAL_DEGREE_ID),
  CONSTRAINT FK_TWDOCEDU_CLGEID FOREIGN KEY(TW_MEDICAL_COLLEGE_ID) REFERENCES TW_MEDICAL_COLLEGE(TW_MEDICAL_COLLEGE_ID)
);
CREATE SEQUENCE SEQ_TW_DOCTOR_EDUCATION_ID CACHE 2;

CREATE TABLE TW_DOCTOR_EXPERIENCE(
  TW_DOCTOR_EXPERIENCE_ID NUMBER,
  TW_DOCTOR_ID NUMBER NOT NULL,
  TW_HOSPITAL_ID NUMBER,
  DATE_FROM DATE,
  DATE_TO DATE,
  PREPARED_BY VARCHAR2(64),
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_TWDOCEXP_ID PRIMARY KEY (TW_DOCTOR_EXPERIENCE_ID),
  CONSTRAINT FK_TWDOCEXP_DOCID FOREIGN KEY(TW_DOCTOR_ID) REFERENCES TW_DOCTOR(TW_DOCTOR_ID),
  CONSTRAINT FK_TWDOCEXP_HSPTLID FOREIGN KEY(TW_HOSPITAL_ID) REFERENCES TW_HOSPITAL(TW_HOSPITAL_ID)
);
CREATE SEQUENCE SEQ_TW_DOCTOR_EXPERIENCE_ID CACHE 2;

SELECT * FROM TW_HOSPITAL;
DESC TW_WEB_USERS;
CREATE TABLE TW_HOSPITAL(
  TW_HOSPITAL_ID NUMBER,
  TITLE VARCHAR2(164) NOT NULL,
  COUNTRY_ID NUMBER,
  CITY_ID NUMBER,
  ADDRESS VARCHAR2(250),
  CONSTRAINT PK_TWHSPTL_ID PRIMARY KEY (TW_HOSPITAL_ID),
  CONSTRAINT FK_TWHSPTL_CNTRYID FOREIGN KEY(COUNTRY_ID) REFERENCES COUNTRY(COUNTRY_ID),
  CONSTRAINT FK_TWHSPTL_CTYID FOREIGN KEY(CITY_ID) REFERENCES CITY(CITY_ID)
);
CREATE SEQUENCE SEQ_TW_HOSPITAL_ID CACHE 2;


CREATE TABLE TW_ASSOCIATION(
  TW_ASSOCIATION_ID NUMBER,
  TITLE VARCHAR2(164) NOT NULL,
  CONSTRAINT PK_TWASSOC_ID PRIMARY KEY (TW_ASSOCIATION_ID)
);
CREATE SEQUENCE SEQ_TW_ASSOCIATION_ID CACHE 2;

CREATE TABLE TW_DOCTOR_ASSOCIATION(
  TW_DOCTOR_ASSOCIATION_ID NUMBER,
  TW_DOCTOR_ID NUMBER NOT NULL,
  TW_ASSOCIATION_ID NUMBER,
  PREPARED_BY VARCHAR2(64),
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_TWDOCASS_ID PRIMARY KEY (TW_DOCTOR_ASSOCIATION_ID),
  CONSTRAINT FK_TWDOCASS_DOCID FOREIGN KEY(TW_DOCTOR_ID) REFERENCES TW_DOCTOR(TW_DOCTOR_ID),
  CONSTRAINT FK_TWDOCASS_ASSOCID FOREIGN KEY(TW_ASSOCIATION_ID) REFERENCES TW_ASSOCIATION(TW_ASSOCIATION_ID)
);
CREATE SEQUENCE SEQ_TW_DOCTOR_ASSOCIATION_ID CACHE 2;

CREATE TABLE TW_COLLECTED_FEE(
  TW_COLLECTED_FEE_ID NUMBER,
  TW_PATIENT_ID NUMBER NOT NULL,
  TW_APPOINTMENT_ID NUMBER,
  DTE DATE,
  AMNT NUMBER DEFAULT 0,
  PREPARED_BY VARCHAR2(64),
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_COLLFEE_ID PRIMARY KEY (TW_COLLECTED_FEE_ID),
  CONSTRAINT FK_COLLFEE_PTNTID FOREIGN KEY(TW_PATIENT_ID) REFERENCES TW_PATIENT(TW_PATIENT_ID),
  CONSTRAINT FK_COLLFEE_APPID FOREIGN KEY(TW_APPOINTMENT_ID) REFERENCES TW_APPOINTMENT(TW_APPOINTMENT_ID)
);

CREATE SEQUENCE SEQ_TW_COLLECTED_FEE_ID CACHE 2;

CREATE TABLE TW_PRINT_LAYOUT(
  TW_PRINT_LAYOUT_ID NUMBER,
  TW_DOCTOR_ID NUMBER NOT NULL,
  TOP_MARGIN NUMBER DEFAULT 1,
  BOTTOM_MARGIN NUMBER DEFAULT 1,
  PREPARED_BY VARCHAR2(64),
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_PRNTLAYOUT_ID PRIMARY KEY (TW_PRINT_LAYOUT_ID),
  CONSTRAINT FK_PRNTLAYOUT_DOCID FOREIGN KEY(TW_DOCTOR_ID) REFERENCES TW_DOCTOR(TW_DOCTOR_ID)
);

CREATE SEQUENCE SEQ_TW_PRINT_LAYOUT_ID CACHE 2;

CREATE TABLE TW_SMS_TEMPLATE(
  TW_SMS_TEMPLATE_ID NUMBER,
  TITLE VARCHAR2(128) NOT NULL,
  DETAIL VARCHAR2(500),
  PREPARED_BY VARCHAR2(64),
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_SMSTEMP_ID PRIMARY KEY (TW_SMS_TEMPLATE_ID)
);

CREATE SEQUENCE SEQ_TW_SMS_TEMPLATE_ID CACHE 2;

INSERT INTO TW_RIGHTS VALUES ('SMS Templates',11,'clinic.htm?action=addMessages',35,'SMS Templates',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);
INSERT INTO TW_RIGHTS VALUES ('Print Layout',11,'clinic.htm?action=addPrintLayout',36,'Print Layout',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);

ALTER TABLE TW_DOCTOR ADD TW_DOCTOR_TYPE_ID NUMBER;
ALTER TABLE TW_DOCTOR ADD CITY_ID NUMBER;
ALTER TABLE TW_DOCTOR ADD COUNTRY_ID NUMBER;
ALTER TABLE TW_DOCTOR ADD ALLOW_VIDEO VARCHAR2(1) DEFAULT 'N';
ALTER TABLE TW_DOCTOR ADD LINKEDIN_URL VARCHAR2(250);
ALTER TABLE TW_DOCTOR ADD PROFILE_IMAGE VARCHAR2(256); 

ALTER TABLE TW_PATIENT_DISEASE ADD TW_PATIENT_ID NUMBER;

INSERT INTO TW_RIGHTS VALUES ('Diseases',2,'clinic.htm?action=addDiseases',28,'Diseases',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);
INSERT INTO TW_RIGHTS VALUES ('Degrees',2,'clinic.htm?action=addMedicalDegrees',29,'Degree',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);
INSERT INTO TW_RIGHTS VALUES ('Countries',2,'clinic.htm?action=addCountry',29,'Countries',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);
INSERT INTO TW_RIGHTS VALUES ('Cities',2,'clinic.htm?action=addCity',30,'Cities',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);
INSERT INTO TW_RIGHTS VALUES ('Medical Services',2,'clinic.htm?action=addMedicalServices',31,'Medical Services',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);
INSERT INTO TW_RIGHTS VALUES ('Colleges',2,'clinic.htm?action=addEducationInstitution',32,'Colleges',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);
INSERT INTO TW_RIGHTS VALUES ('Lab Tests',2,'clinic.htm?action=addLabTest',33,'Lab Tests',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);
INSERT INTO TW_RIGHTS VALUES ('Medicines',2,'clinic.htm?action=addMedicine',34,'Medicines',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);

ALTER TABLE TW_DOCTOR_CLINIC ADD TOTAL_APPOINTMENT NUMBER DEFAULT 10;

---------------------------05/12/2017

CREATE TABLE TW_DOCTOR_DISESE(
  TW_DOCTOR_DISESE_ID NUMBER,
  TW_DOCTOR_ID NUMBER NOT NULL,
  TW_DISEASE_ID NUMBER,
  PREPARED_BY VARCHAR2(64),
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_TWDOCDIS_ID PRIMARY KEY (TW_DOCTOR_DISESE_ID),
  CONSTRAINT FK_TWDOCDIS_DOCID FOREIGN KEY(TW_DOCTOR_ID) REFERENCES TW_DOCTOR(TW_DOCTOR_ID),
  CONSTRAINT FK_TWDOCDIS_ASSOCID FOREIGN KEY(TW_DISEASE_ID) REFERENCES TW_DISEASE(TW_DISEASE_ID)
);
CREATE SEQUENCE SEQ_TW_DOCTOR_DISESE_ID CACHE 2;

INSERT INTO TW_RIGHTS VALUES ('Medical Association',2,'clinic.htm?action=addAssociation',37,'Medical Association',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);

ALTER TABLE TW_PROCEDURE_FEE DROP CONSTRAINT UK_DOCPROC_PROCDOCID ;
DROP INDEX UK_DOCPROC_PROCDOCID ;
ALTER TABLE TW_PROCEDURE_FEE ADD  CONSTRAINT UK_DOCPROCCOMP_PROCDOCID UNIQUE  (TW_DOCTOR_ID,TW_MEDICAL_PROCEDURE_ID,TW_COMPANY_ID);

---------------------------06/12/2017
ALTER TABLE TW_DISEASE ADD SHOW_INTAKE_IND VARCHAR2(1) DEFAULT 'N';

ALTER TABLE TW_PATIENT_ATTACHMENT ADD TW_DOCTOR_ID NUMBER;

INSERT INTO TW_RIGHTS VALUES ('Procedures',2,'clinic.htm?action=addProcedure',38,'Procedures',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);

DELETE FROM TW_APPOINTMENT;
DELETE FROM TW_APPOINTMENT_FEE;
DELETE FROM TW_COLLECTED_FEE;
ALTER TABLE TW_APPOINTMENT ADD  CONSTRAINT UK_APNTPTNT_PTNTID UNIQUE  (TW_DOCTOR_ID,TW_CLINIC_ID,TW_PATIENT_ID,APPOINTMENT_DTE);
ALTER TABLE TW_PATIENT ADD CITY_ID NUMBER;



ALTER TABLE TW_APPOINTMENT_FEE ADD TW_COMPANY_ID NUMBER;
ALTER TABLE TW_PHARMACEUTICAL ADD(WEB_URL VARCHAR(256),LOGO_IMG VARCHAR(256),EXP_DATE DATE DEFAULT SYSDATE);
ALTER TABLE TW_DOCTOR
ADD (VIDEO_CLINIC_FROM DATE,VIDEO_CLINIC_TO DATE);


ALTER TABLE Tw_Appointment_Fee ADD TW_MEDEICAL_PROCEDURE_ID NUMBER;
ALTER TABLE TW_DOCTOR_SERVICE ADD (TW_MEDICAL_SERVICE_ID NUMBER, CONSTRAINT FK_MEDICAL_SERVICE_ID FOREIGN KEY(TW_MEDICAL_SERVICE_ID) REFERENCES TW_MEDICAL_SERVICE(TW_MEDICAL_SERVICE_ID));
ALTER TABLE Tw_Appointment_Fee ADD TW_MEDEICAL_PROCEDURE_ID NUMBER;
ALTER TABLE TW_APPOINTMENT_FEE DROP COLUMN TW_PROCEDURE_FEE_ID;



CREATE TABLE TW_MEDICAL_SPECIALITY(
  TW_MEDICAL_SPECIALITY_ID NUMBER,                                                                                                                                                                         
  TITLE VARCHAR2(128) NOT NULL,                     
  CONSTRAINT PK_MDCLSPCL_ID PRIMARY KEY (TW_MEDICAL_SPECIALITY_ID),
  CONSTRAINT UK_MDCLSPCL_TITLE UNIQUE (TITLE)
);
CREATE SEQUENCE SEQ_TW_MEDICAL_SPECIALITY_ID CACHE 2;

INSERT INTO TW_MEDICAL_SPECIALITY(TW_MEDICAL_SPECIALITY_ID,TITLE)
SELECT TW_DOCTOR_TYPE_ID,TITLE FROM TW_DOCTOR_TYPE;

CREATE TABLE TW_DOCTOR_SPECIALITY(
  TW_DOCTOR_SPECIALITY_ID NUMBER,
  TW_DOCTOR_ID NUMBER NOT NULL,
  TW_MEDICAL_SPECIALITY_ID NUMBER,
  PREPARED_BY VARCHAR2(64),
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_DOCSPCLT_ID PRIMARY KEY (TW_DOCTOR_SPECIALITY_ID),
  CONSTRAINT FK_DOCSPCLT_DOCID FOREIGN KEY(TW_DOCTOR_ID) REFERENCES TW_DOCTOR(TW_DOCTOR_ID),
  CONSTRAINT FK_DOCSPCLT_SPCLID FOREIGN KEY(TW_MEDICAL_SPECIALITY_ID) REFERENCES TW_MEDICAL_SPECIALITY(TW_MEDICAL_SPECIALITY_ID)
);
CREATE SEQUENCE SEQ_TW_DOCTOR_SPECIALITY_ID CACHE 2;

ALTER TABLE TW_MEDICINE ADD THERAPEUTIC_CLASS VARCHAR2(64);
ALTER TABLE TW_MEDICINE ADD TW_PHARMACEUTICAL_ID NUMBER;
ALTER TABLE TW_MEDICINE ADD CONSTRAINT FK_TWPHARMACOMP_COMPID FOREIGN KEY(TW_PHARMACEUTICAL_ID) REFERENCES TW_PHARMACEUTICAL(TW_PHARMACEUTICAL_ID);
ALTER TABLE TW_MEDICINE ADD PRODUCT_DESC VARCHAR2(500);
ALTER TABLE TW_MEDICINE ADD PRODUCT_TYPE VARCHAR2(16);

CREATE TABLE TW_MEDICINE_DISEASE(
  TW_MEDICINE_DISEASE_ID NUMBER,
  TW_MEDICINE_ID NUMBER,   
  TW_DISEASE_ID NUMBER,
  CONSTRAINT PK_MEDDISEASE_ID PRIMARY KEY (TW_MEDICINE_DISEASE_ID),
  CONSTRAINT FK_MEDDISEASE_PRODID FOREIGN KEY(TW_DISEASE_ID) REFERENCES TW_DISEASE(TW_DISEASE_ID),
  CONSTRAINT FK_MEDDISEASE_MEDID FOREIGN KEY(TW_MEDICINE_ID) REFERENCES TW_MEDICINE(TW_MEDICINE_ID)
);

CREATE SEQUENCE SEQ_TW_MEDICINE_DISEASE_ID CACHE 2;


----------------12-12-2017
ALTER TABLE TW_PATIENT ADD REFERRED_BY VARCHAR2(64);
ALTER TABLE TW_PATIENT ADD PROFESSION VARCHAR2(64);

CREATE TABLE TW_LABORATORY(
  TW_LABORATORY_ID NUMBER,
  LABORATORY_NME VARCHAR2(128) NOT NULL,
  RECOMENDED_IND VARCHAR2(1) DEFAULT 'N',
  PREPARED_BY VARCHAR2(64),
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_TWLABID_ID PRIMARY KEY (TW_LABORATORY_ID),
  CONSTRAINT UK_TWLABID_TITLE UNIQUE (LABORATORY_NME)
);
CREATE SEQUENCE SEQ_TW_LABORATORY_ID CACHE 2;

CREATE TABLE TW_MEDICAL_STORE(
  TW_MEDICAL_STORE_ID NUMBER,
  STORE_NME VARCHAR2(128) NOT NULL,
  RECOMENDED_IND VARCHAR2(1) DEFAULT 'N',
  PREPARED_BY VARCHAR2(64),
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_TWMDCLSTR_ID PRIMARY KEY (TW_MEDICAL_STORE_ID),
  CONSTRAINT UK_TWMDCLSTR_TITLE UNIQUE (STORE_NME)
);
CREATE SEQUENCE SEQ_TW_MEDICAL_STORE_ID CACHE 2;

INSERT INTO TW_RIGHTS VALUES ('Laboratories',2,'clinic.htm?action=addMedicalLab',39,'Laboratories',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);


ALTER TABLE TW_PRESCRIPTION_DETAIL DROP COLUMN TW_LABORTARY_ID;

ALTER TABLE TW_PRESCRIPTION_DETAIL ADD TW_LABORATORY_ID NUMBER;
ALTER TABLE TW_PRESCRIPTION_DETAIL ADD CONSTRAINT FK_PRESCDTL_LABID FOREIGN KEY(TW_LABORATORY_ID) REFERENCES TW_LABORATORY(TW_LABORATORY_ID)




----------------12/16/2017
CREATE TABLE STATE(
  STATE_ID NUMBER,
  STATE_NME VARCHAR2(64),
  COUNTRY_ID NUMBER,
  TW_COMPANY_ID NUMBER,
  PREPARED_DTE DATE,
  CONSTRAINT PK_STATE_ID  PRIMARY KEY(STATE_ID),
  CONSTRAINT FK_STATE_CONTRYID FOREIGN KEY(COUNTRY_ID) REFERENCES COUNTRY(COUNTRY_ID),
  CONSTRAINT FK_STATE_COMPID FOREIGN KEY(TW_COMPANY_ID) REFERENCES TW_COMPANY(TW_COMPANY_ID)
);

CREATE SEQUENCE SEQ_STATE_ID CACHE 2;

CREATE TABLE TW_PHARMA_AREA(
 TW_PHARMA_AREA_ID NUMBER,
 TW_PHARMACEUTICAL_ID NUMBER,
 AREA_NME VARCHAR2(164) NOT NULL,
 CITY_ID NUMBER,
 PREPARED_BY VARCHAR2(64),
 PREPARED_DTE DATE DEFAULT SYSDATE,
 CONSTRAINT PK_PHARMAAREA_ID PRIMARY KEY (TW_PHARMA_AREA_ID),
 CONSTRAINT FK_PHARMAAREA_COMPID FOREIGN KEY(TW_PHARMACEUTICAL_ID) REFERENCES TW_PHARMACEUTICAL(TW_PHARMACEUTICAL_ID),
 CONSTRAINT FK_PHARMAAREA_CITYID FOREIGN KEY(CITY_ID) REFERENCES CITY(CITY_ID),
 CONSTRAINT UK_PHARMARAP_CITYAREA UNIQUE (CITY_ID,AREA_NME)
);
CREATE SEQUENCE SEQ_TW_PHARMA_AREA_ID CACHE 2;


CREATE TABLE TW_PHARMA_RAP(
 TW_PHARMA_RAP_ID NUMBER,
 TW_PHARMACEUTICAL_ID NUMBER,
 FULL_NME VARCHAR2(164) NOT NULL,
 CONTACT_NO VARCHAR2(16),
 DESIGNITION VARCHAR2(16),
 COUNTRY_ID NUMBER,
 CITY_ID NUMBER,
 PREPARED_BY VARCHAR2(64),
 PREPARED_DTE DATE DEFAULT SYSDATE,
 CONSTRAINT PK_PHARMARAP_ID PRIMARY KEY (TW_PHARMA_RAP_ID),
 CONSTRAINT FK_PHARMARAP_COMPID FOREIGN KEY(TW_PHARMACEUTICAL_ID) REFERENCES TW_PHARMACEUTICAL(TW_PHARMACEUTICAL_ID),
 CONSTRAINT FK_PHARMARAP_COUNTRYID FOREIGN KEY(COUNTRY_ID) REFERENCES COUNTRY(COUNTRY_ID),
 CONSTRAINT FK_PHARMARAP_CITYID FOREIGN KEY(CITY_ID) REFERENCES CITY(CITY_ID),
 CONSTRAINT UK_PHARMARAP_CELLNO UNIQUE (CONTACT_NO)
);
CREATE SEQUENCE SEQ_TW_PHARMA_RAP_ID CACHE 2;

INSERT INTO TW_RIGHTS VALUES ('States',2,'clinic.htm?action=addState',38.5,'States',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);
INSERT INTO TW_RIGHTS VALUES ('Area',2,'clinic.htm?action=addArea',38.7,'Area',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);

INSERT INTO TW_RIGHTS VALUES ('Medical Rep',2,'clinic.htm?action=addMedicineRep',38.6,'Medical Rep',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);
INSERT INTO TW_RIGHTS VALUES ('Pharma Area',2,'clinic.htm?action=addPharmaArea',38.8,'Pharma Area',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);
ALTER TABLE TW_PRESCRIPTION_DETAIL ADD CONSTRAINT FK_PRESCDTL_LABID FOREIGN KEY(TW_LABORATORY_ID) REFERENCES TW_LABORATORY(TW_LABORATORY_ID)



CREATE TABLE TW_PHARMA_RAP(
  TW_PHARMA_RAP_ID NUMBER,
  TW_PHARMACEUTICAL_ID NUMBER,
  FULL_NME VARCHAR2(164) NOT NULL,
  CONTACT_NO VARCHAR2(16),
  DESIGNITION VARCHAR2(16),
  COUNTRY_ID NUMBER,
  CITY_ID NUMBER,
  PREPARED_BY VARCHAR2(64),
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_PHARMARAP_ID PRIMARY KEY (TW_PHARMA_RAP_ID),
  CONSTRAINT FK_PHARMARAP_COMPID FOREIGN KEY(TW_PHARMACEUTICAL_ID) REFERENCES TW_PHARMACEUTICAL(TW_PHARMACEUTICAL_ID),
  CONSTRAINT FK_PHARMARAP_COUNTRYID FOREIGN KEY(COUNTRY_ID) REFERENCES COUNTRY(COUNTRY_ID),
  CONSTRAINT FK_PHARMARAP_CITYID FOREIGN KEY(CITY_ID) REFERENCES CITY(CITY_ID),
  CONSTRAINT UK_PHARMARAP_CELLNO UNIQUE (CONTACT_NO)
);
CREATE SEQUENCE SEQ_TW_PHARMA_RAP_ID CACHE 2;

CREATE TABLE TW_PHARMA_AREA(
  TW_PHARMA_AREA_ID NUMBER,
  TW_PHARMACEUTICAL_ID NUMBER,
  AREA_NME VARCHAR2(164) NOT NULL,
  CITY_ID NUMBER,
  PREPARED_BY VARCHAR2(64),
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_PHARMAAREA_ID PRIMARY KEY (TW_PHARMA_AREA_ID),
  CONSTRAINT FK_PHARMAAREA_COMPID FOREIGN KEY(TW_PHARMACEUTICAL_ID) REFERENCES TW_PHARMACEUTICAL(TW_PHARMACEUTICAL_ID),
  CONSTRAINT FK_PHARMAAREA_CITYID FOREIGN KEY(CITY_ID) REFERENCES CITY(CITY_ID),
  CONSTRAINT UK_PHARMARAP_CITYAREA UNIQUE (CITY_ID,AREA_NME)
);
CREATE SEQUENCE SEQ_TW_PHARMA_AREA_ID CACHE 2;


ALTER TABLE TW_CLINIC ADD COUNTRY_ID NUMBER;
ALTER TABLE TW_CLINIC ADD CONSTRAINT FK_TWCLINIC_CNTRYID FOREIGN KEY(COUNTRY_ID) REFERENCES COUNTRY(COUNTRY_ID);
ALTER TABLE TW_CLINIC ADD CITY_ID NUMBER;
ALTER TABLE TW_CLINIC ADD CONSTRAINT FK_TWCLINIC_CITYID FOREIGN KEY(CITY_ID) REFERENCES CITY(CITY_ID);
ALTER TABLE TW_CLINIC ADD CITY_AREA_ID NUMBER;
ALTER TABLE TW_CLINIC ADD CONSTRAINT FK_TWCLINIC_CITYAREAID FOREIGN KEY(CITY_AREA_ID) REFERENCES CITY_AREA(CITY_AREA_ID);

CREATE TABLE CITY_AREA(
  CITY_AREA_ID NUMBER,
  AREA_NME VARCHAR2(164) NOT NULL,
  CITY_ID NUMBER,
  PREPARED_BY VARCHAR2(64),
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_CTYAREA_ID PRIMARY KEY (CITY_AREA_ID),
  CONSTRAINT FK_CITY_AREA_ID_CITYID FOREIGN KEY(CITY_ID) REFERENCES CITY(CITY_ID),
  CONSTRAINT UK_CITY_AREA_ID_CITYAREA UNIQUE (CITY_ID,AREA_NME)
);
CREATE SEQUENCE SEQ_CITY_AREA_ID CACHE 2;

ALTER TABLE TW_HOSPITAL ADD CITY_AREA_ID NUMBER;
ALTER TABLE TW_HOSPITAL ADD CONSTRAINT FK_TWHSPTL_CITYAREAID FOREIGN KEY(CITY_AREA_ID) REFERENCES CITY_AREA(CITY_AREA_ID);


CREATE TABLE TW_RAP_AREA(
  TW_RAP_AREA_ID NUMBER,
  TW_PHARMA_RAP_ID NUMBER NOT NULL,
  CITY_ID NUMBER,
  CITY_AREA_ID NUMBER NOT NULL,
  PREPARED_BY VARCHAR2(64),
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_TWRAPAREA_ID PRIMARY KEY (TW_PHARMA_RAP_ID),
  CONSTRAINT FK_TWRAPAREA_RAPID FOREIGN KEY(TW_PHARMA_RAP_ID) REFERENCES TW_PHARMA_RAP(TW_PHARMA_RAP_ID),
  CONSTRAINT FK_TWRAPAREA_CITYID FOREIGN KEY(CITY_ID) REFERENCES CITY(CITY_ID),
  CONSTRAINT UK_TWRAPAREA_RAPAREA UNIQUE (TW_PHARMA_RAP_ID,CITY_AREA_ID)
);
CREATE SEQUENCE SEQ_TW_RAP_AREA_ID CACHE 2;

ALTER TABLE TW_PRINT_LAYOUT ADD TOP_IMAGE VARCHAR2(250);
ALTER TABLE TW_PRINT_LAYOUT ADD BOTTOM_IMAGE VARCHAR2(250);
ALTER TABLE TW_HOSPITAL ADD CONSTRAINT FK_TWHSPTL_CITYAREAID FOREIGN KEY(CITY_AREA_ID) REFERENCES CITY_AREA(CITY_AREA_ID);



---------------------21/12/2017




CREATE TABLE TW_MEDICINE_TYP (
 TW_MEDICINE_TYP_ID NUMBER,
 TW_MEDICINE_TYP_NME VARCHAR(64),
 TW_COMPANY_ID NUMBER,
 PREPARED_BY VARCHAR(64),
 PREPARED_DTE DATE DEFAULT SYSDATE,
 CONSTRAINT PK_MEDICINETYP_MEDICINETYPID  PRIMARY KEY(TW_MEDICINE_TYP_ID),
 CONSTRAINT FK_MEDICINETYP_COMPID FOREIGN KEY(TW_COMPANY_ID) REFERENCES TW_COMPANY(TW_COMPANY_ID)
);

CREATE SEQUENCE SEQ_TW_MEDICINE_TYP_ID CACHE 2;

ALTER TABLE TW_MEDICINE DROP COLUMN PRODUCT_TYPE;
ALTER TABLE TW_MEDICINE ADD (
 TW_MEDICINE_TYP_ID NUMBER,
 CONSTRAINT FK_MEDICINE_MEDICINETYPID FOREIGN KEY(TW_MEDICINE_TYP_ID) REFERENCES TW_MEDICINE_TYP(TW_MEDICINE_TYP_ID)
);

INSERT INTO TW_RIGHTS VALUES ('Medicine Type',2,'clinic.htm?action=addMedicineType',7.3,'Medicine Type',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);

INSERT INTO TW_RIGHTS VALUES ('Rep Appointment',2,'clinic.htm?action=addMedicalRepAppointment',38.8,'Rep Appointment',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);
ALTER TABLE TW_MEDICINE ADD(MED_IMG VARCHAR(256));


---------------------23/12/2017
CREATE TABLE TW_ROLE(
TW_ROLE_ID NUMBER,
ROLE_NME VARCHAR2(32),
CONSTRAINT PK_TWROLE_ROLEID PRIMARY KEY (TW_ROLE_ID)
);
CREATE SEQUENCE SEQ_TW_ROLE_ID CACHE 2;

CREATE TABLE TW_ROLE_RIGHTS(
TW_ROLE_RIGHTS_ID NUMBER,
TW_ROLE_ID NUMBER,
RIGHT_NME VARCHAR2(64),
CONSTRAINT PK_TWROLE_RIGHTID PRIMARY KEY (TW_ROLE_RIGHTS_ID),
CONSTRAINT FK_TWROLERIGHT_ROLEID FOREIGN KEY(TW_ROLE_ID) REFERENCES TW_ROLE(TW_ROLE_ID),
CONSTRAINT FK_TWROLERIGHT_RGHTNME FOREIGN KEY(RIGHT_NME) REFERENCES TW_RIGHTS(RIGHT_NME)
);
CREATE SEQUENCE SEQ_TW_ROLE_RIGHTS_ID CACHE 2;

INSERT INTO TW_ROLE VALUES(1,'ADMIN');
INSERT INTO TW_ROLE VALUES(2,'DOCTOR');
INSERT INTO TW_ROLE VALUES(3,'PATIENT');
INSERT INTO TW_ROLE VALUES(4,'PHARMA COMPANY');
INSERT INTO TW_ROLE VALUES(5,'HOSPITAL');


INSERT INTO TW_RIGHTS VALUES ('Role Rights',2,'ums.htm?action=assignRoleRights',40,'Role Rights',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);

COMMIT;

---------------------26/12/2017
CREATE TABLE TW_BLOOD_GROUP(
  TW_BLOOD_GROUP_ID NUMBER,                                                                                                                                                                         
  TITLE VARCHAR2(128) NOT NULL,
  CONSTRAINT PK_BLDGRP_ID PRIMARY KEY (TW_BLOOD_GROUP_ID),
  CONSTRAINT UK_BLDGRP_TITLE UNIQUE (TITLE)
);
CREATE SEQUENCE SEQ_TW_BLOOD_GROUP_ID CACHE 2;

INSERT INTO TW_BLOOD_GROUP VALUES(SEQ_TW_BLOOD_GROUP_ID.NEXTVAL,'A+');
INSERT INTO TW_BLOOD_GROUP VALUES(SEQ_TW_BLOOD_GROUP_ID.NEXTVAL,'A-');
INSERT INTO TW_BLOOD_GROUP VALUES(SEQ_TW_BLOOD_GROUP_ID.NEXTVAL,'B+');
INSERT INTO TW_BLOOD_GROUP VALUES(SEQ_TW_BLOOD_GROUP_ID.NEXTVAL,'B-');
INSERT INTO TW_BLOOD_GROUP VALUES(SEQ_TW_BLOOD_GROUP_ID.NEXTVAL,'O+');
INSERT INTO TW_BLOOD_GROUP VALUES(SEQ_TW_BLOOD_GROUP_ID.NEXTVAL,'O-');
INSERT INTO TW_BLOOD_GROUP VALUES(SEQ_TW_BLOOD_GROUP_ID.NEXTVAL,'AB+');
INSERT INTO TW_BLOOD_GROUP VALUES(SEQ_TW_BLOOD_GROUP_ID.NEXTVAL,'AB-');
COMMIT;

CREATE TABLE TW_BLOOD_DONOR(
  TW_BLOOD_DONOR_ID NUMBER,                                                                                                                                                                         
  PERSON_NME VARCHAR2(128) NOT NULL,
  MOBILE_NO VARCHAR2(16) NOT NULL,
  TW_BLOOD_GROUP_ID NUMBER NOT NULL,
  GENDER VARCHAR2(1) DEFAULT 'M',
  AGE NUMBER,
  DOB DATE,
  CITY_ID NUMBER,
  CITY_AREA_ID NUMBER,
  ADDRESS VARCHAR2(250),
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_BLDDONOR_ID PRIMARY KEY (TW_BLOOD_DONOR_ID),
  CONSTRAINT FK_BLDDONOR_BLDGRPID FOREIGN KEY(TW_BLOOD_GROUP_ID) REFERENCES TW_BLOOD_GROUP(TW_BLOOD_GROUP_ID),
  CONSTRAINT UK_BLDDONOR_CELLNO UNIQUE (MOBILE_NO)
);

CREATE SEQUENCE SEQ_TW_BLOOD_DONOR_ID CACHE 2;


------------------------12/28/2017

ALTER TABLE CITY DROP CONSTRAINT UK_CITY_CITYNMECOMPID;
ALTER TABLE CITY ADD ( CONSTRAINT UK_CITY_CITYNMECONTRYID UNIQUE (CITY_NME,COUNTRY_ID)  );

------------------------01/02/2017

INSERT INTO TW_RIGHTS VALUES ('Add Brick',2,'clinic.htm?action=addBrick',38.9,'Add Brick',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);

CREATE TABLE TW_BRICK_MASTER(
  TW_BRICK_MASTER_ID NUMBER,                                                                                                                                                                         
  TITLE VARCHAR2(128) NOT NULL,
  TW_PHARMACEUTICAL_ID NUMBER,
  PREPARED_BY VARCHAR2(64),
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_TWBRICKMSTR_ID PRIMARY KEY (TW_BRICK_MASTER_ID),
  CONSTRAINT FK_TWBRICKMSTR_PHARMAID FOREIGN KEY(TW_PHARMACEUTICAL_ID) REFERENCES TW_PHARMACEUTICAL(TW_PHARMACEUTICAL_ID),
  CONSTRAINT UK_TWBRICKMSTR_TITLE UNIQUE (TW_PHARMACEUTICAL_ID,TITLE)
);

CREATE SEQUENCE SEQ_TW_BRICK_MASTER_ID CACHE 2;

CREATE TABLE TW_BRICK_DETAIL(
  TW_BRICK_DETAIL_ID NUMBER,
  TW_BRICK_MASTER_ID NUMBER,                                                                                                                                                      
  CITY_AREA_ID NUMBER,
  CONSTRAINT PK_TWBRICKDTL_ID PRIMARY KEY (TW_BRICK_DETAIL_ID),
  CONSTRAINT FK_TWBRICKDTL_PHARMAID FOREIGN KEY(CITY_AREA_ID) REFERENCES CITY_AREA(CITY_AREA_ID)
);
CREATE SEQUENCE SEQ_TW_BRICK_DETAIL_ID CACHE 2;

------------------------1/4/2018

ALTER TABLE TW_PATIENT ADD ( TW_BLOOD_GROUP_ID NUMBER,
  CONSTRAINT FK_PATIENT_BLOODGROUPID FOREIGN KEY (TW_BLOOD_GROUP_ID) REFERENCES TW_BLOOD_GROUP(TW_BLOOD_GROUP_ID)
);


-------------------
CREATE TABLE TW_RAP_BRICK(
  TW_RAP_BRICK_ID NUMBER,
  TW_BRICK_MASTER_ID NUMBER,
  TW_PHARMA_RAP_ID NUMBER NOT NULL,
  PREPARED_BY VARCHAR2(64),
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_TWRAPBRICK_ID PRIMARY KEY (TW_RAP_BRICK_ID),
  CONSTRAINT FK_TWRAPBRICK_RAPID FOREIGN KEY(TW_PHARMA_RAP_ID) REFERENCES TW_PHARMA_RAP(TW_PHARMA_RAP_ID),
  CONSTRAINT FK_TWRAPBRICK_BRKID FOREIGN KEY(TW_BRICK_MASTER_ID) REFERENCES TW_BRICK_MASTER(TW_BRICK_MASTER_ID),
  CONSTRAINT UK_TWRAPBRICK_BRK UNIQUE (TW_PHARMA_RAP_ID,TW_BRICK_MASTER_ID)
);
CREATE SEQUENCE SEQ_TW_RAP_BRICK_ID CACHE 2;


CREATE TABLE PROVINCE(
  PROVINCE_ID NUMBER,
  PROVINCE_NME VARCHAR2(64) NOT NULL,
  CONSTRAINT PK_PROVINCE_ID PRIMARY KEY (PROVINCE_ID),
  CONSTRAINT UK_PROVINCE_NME UNIQUE (PROVINCE_NME)
);

INSERT INTO PROVINCE VALUES(1,'Punjab');
INSERT INTO PROVINCE VALUES(2,'Sindh');
INSERT INTO PROVINCE VALUES(3,'Khyber Pakhtunkhwa');
INSERT INTO PROVINCE VALUES(4,'Balochistan');
INSERT INTO PROVINCE VALUES(5,'Islamabad');
INSERT INTO PROVINCE VALUES(6,'Fata');
INSERT INTO PROVINCE VALUES(7,'Gilgit Baltistan');
INSERT INTO PROVINCE VALUES(8,'Azad Jammu Kashmir');

ALTER TABLE CITY ADD PROVINCE_ID NUMBER;

ALTER TABLE CITY ADD CONSTRAINT FK_CITY_PROVID FOREIGN KEY(PROVINCE_ID) REFERENCES PROVINCE(PROVINCE_ID);

CREATE TABLE TW_PATIENT_DOCTOR(
  TW_PATIENT_DOCTOR_ID NUMBER,
  TW_DOCTOR_ID NUMBER NOT NULL,                                                                                                                                                                         
  TW_PATIENT_ID NUMBER NOT NULL,
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_PTNTDOC_ID PRIMARY KEY (TW_PATIENT_DOCTOR_ID),
  CONSTRAINT FK_PTNTDOC_DOCID FOREIGN KEY(TW_DOCTOR_ID) REFERENCES TW_DOCTOR(TW_DOCTOR_ID),
  CONSTRAINT UK_PTNTDOC_PTNTDOC UNIQUE (TW_DOCTOR_ID,TW_PATIENT_ID),
  CONSTRAINT FK_PTNTDOC_PTNTID FOREIGN KEY(TW_PATIENT_ID) REFERENCES TW_PATIENT(TW_PATIENT_ID)
);

CREATE SEQUENCE SEQ_TW_PATIENT_DOCTOR_ID CACHE 2;


CREATE TABLE TW_DOCTOR_DAYS(
  TW_DOCTOR_DAYS_ID NUMBER,                                                                                                                                                                         
  TW_DOCTOR_ID NUMBER NOT NULL,
  TW_CLINIC_ID NUMBER NOT NULL,
  WEEK_DAY VARCHAR2(8) NOT NULL,
  CONSTRAINT PK_DOCDYS_ID PRIMARY KEY (TW_DOCTOR_DAYS_ID),
  CONSTRAINT FK_DOCDYS_DOCID FOREIGN KEY(TW_DOCTOR_ID) REFERENCES TW_DOCTOR(TW_DOCTOR_ID),
  CONSTRAINT FK_DOCDYS_CLINCID FOREIGN KEY(TW_CLINIC_ID) REFERENCES TW_CLINIC(TW_CLINIC_ID),
  CONSTRAINT UK_DOCDYS_DAYS UNIQUE (TW_DOCTOR_ID,TW_CLINIC_ID,WEEK_DAY)
);
CREATE SEQUENCE SEQ_TW_DOCTOR_DAYS_ID CACHE 2;

ALTER TABLE TW_DOCTOR ADD EXPIRY_DTE DATE DEFAULT SYSDATE+30;



ALTER TABLE TW_DOCTOR_EDUCATION ADD (
  COUNTRY_ID NUMBER,
  CITY_ID NUMBER,
  CONSTRAINT FK_TWDOCEDU_COUNTRYID FOREIGN KEY (COUNTRY_ID) REFERENCES COUNTRY(COUNTRY_ID),
  CONSTRAINT FK_TWDOCEDU_CITYID FOREIGN KEY (CITY_ID) REFERENCES CITY(CITY_ID)
);

ALTER TABLE TW_PATIENT ADD PARENT_PATIENT_ID NUMBER;
ALTER TABLE TW_PATIENT ADD RELATION_TYP VARCHAR2(16);

ALTER TABLE TW_PATIENT ADD CONSTRAINT FK_PTNYPRNTID_PRNTID FOREIGN KEY(PARENT_PATIENT_ID) REFERENCES TW_PATIENT(TW_PATIENT_ID);

INSERT INTO TW_RIGHTS VALUES ('Pharma Management',0,'#',41,'Pharma Management',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,'fa fa-medkit');
UPDATE TW_RIGHTS SET PARENT_ID=41 WHERE RIGHT_NME='Medical Rep';
UPDATE TW_RIGHTS SET PARENT_ID=41 WHERE RIGHT_NME='Rep Appointment';
UPDATE TW_RIGHTS SET PARENT_ID=41 WHERE RIGHT_NME='Add Brick';

ALTER TABLE TW_WEB_USERS ADD TW_PHARMA_RAP_ID NUMBER;
ALTER TABLE TW_WEB_USERS ADD CONSTRAINT FK_WUPHARMA_RAPID FOREIGN KEY(TW_PHARMA_RAP_ID) REFERENCES TW_PHARMA_RAP(TW_PHARMA_RAP_ID);


CREATE TABLE TW_REP_VISIT(
  TW_REP_VISIT_ID NUMBER,
  TW_PHARMA_RAP_ID NUMBER NOT NULL,
  TW_DOCTOR_ID NUMBER NOT NULL,
  LONGITUDE NUMBER DEFAULT 0,
  LATITUDE NUMBER DEFAULT 0,
  DEVICE_DTE DATE,
  DEVICE_MODEL VARCHAR2(64),
  DEVICE_SERIAL VARCHAR2(64),
  APPROVED_IND VARCHAR2(1) DEFAULT 'N',
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_TWREPVISIT_ID PRIMARY KEY (TW_REP_VISIT_ID),
  CONSTRAINT FK_TWREPVISIT_RAPID FOREIGN KEY(TW_PHARMA_RAP_ID) REFERENCES TW_PHARMA_RAP(TW_PHARMA_RAP_ID),
  CONSTRAINT FK_TWREPVISIT_DOCID FOREIGN KEY(TW_DOCTOR_ID) REFERENCES TW_DOCTOR(TW_DOCTOR_ID)
);
CREATE SEQUENCE SEQ_TW_REP_VISIT_ID CACHE 2;


-----------------19-01-2018
CREATE TABLE TW_PHARMACY(
  TW_PHARMACY_ID NUMBER,
  PHARMACY_NME VARCHAR2(128) NOT NULL,
  WEB_URL VARCHAR2(256),
  LOGO_IMAGE VARCHAR2(256),
  PREPARED_BY VARCHAR2(64),
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_TWPHARMACY_ID PRIMARY KEY (TW_PHARMACY_ID),
  CONSTRAINT FK_TWPHARMACY_PRPRDBY FOREIGN KEY(PREPARED_BY) REFERENCES TW_WEB_USERS(USER_NME),
  CONSTRAINT UK_TWPHARMACY_NME UNIQUE (PHARMACY_NME)
);
CREATE SEQUENCE SEQ_TW_PHARMACY_ID CACHE 2;


CREATE TABLE TW_PHARMACY_STORE(
  TW_PHARMACY_STORE_ID NUMBER,
  TW_PHARMACY_ID NUMBER NOT NULL,
  STORE_NME VARCHAR2(128) NOT NULL,
  CONTACT_PERSON VARCHAR2(64),
  MOBILE_NO VARCHAR2(12) NOT NULL,
  LANDLINE_NO VARCHAR2(12),
  EMAIL VARCHAR2(64),
  CITY_ID NUMBER,
  CITY_AREA_ID NUMBER,
  OPEN_FRM DATE,
  OPEN_TO DATE,
  PREPARED_BY VARCHAR2(64),
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_TWPHSTORE_ID PRIMARY KEY (TW_PHARMACY_STORE_ID),
  CONSTRAINT FK_TWPHSTORE_PHRM FOREIGN KEY(TW_PHARMACY_ID) REFERENCES TW_PHARMACY(TW_PHARMACY_ID),
  CONSTRAINT FK_TWPHSTORE_CITY FOREIGN KEY(CITY_ID) REFERENCES CITY(CITY_ID),
  CONSTRAINT FK_TWPHSTORE_CITAREA FOREIGN KEY(CITY_AREA_ID) REFERENCES CITY_AREA(CITY_AREA_ID),
  CONSTRAINT FK_TWPHSTORE_PRPRDBY FOREIGN KEY(PREPARED_BY) REFERENCES TW_WEB_USERS(USER_NME),
  CONSTRAINT UK_TWPHSTORE_MOBILE UNIQUE (MOBILE_NO)
  
);
CREATE SEQUENCE SEQ_TW_PHARMACY_STORE_ID CACHE 2;

INSERT INTO TW_RIGHTS VALUES ('Pharmacy Company',11,'performa.htm?action=addPharmacyCompany',7.4,'Pharmacy Company',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);
INSERT INTO TW_RIGHTS VALUES ('Pharmacy Store',11,'performa.htm?action=addPharmacyStore',7.5,'Pharmacy Store',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);

ALTER TABLE TW_WEB_USERS ADD TW_PHARMACY_ID NUMBER;
ALTER TABLE TW_WEB_USERS ADD TW_PHARMACY_STORE_ID NUMBER;

ALTER TABLE TW_WEB_USERS ADD CONSTRAINT FK_TWWEBUSERS_PHARMACYID FOREIGN KEY(TW_PHARMACY_ID) REFERENCES TW_PHARMACY(TW_PHARMACY_ID);

ALTER TABLE TW_WEB_USERS ADD CONSTRAINT FK_TWWEBUSERS_STOREID FOREIGN KEY(TW_PHARMACY_STORE_ID) REFERENCES TW_PHARMACY_STORE(TW_PHARMACY_STORE_ID);

INSERT INTO TW_RIGHTS VALUES ('Delivery Order',11,'performa.htm?action=viewDeliveryOrder',7.6,'Delivery Order',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);

-----------------25-01-2018

CREATE TABLE TW_LAB_MASTER(
  TW_LAB_MASTER_ID NUMBER,
  LAB_NME VARCHAR2(128) NOT NULL,
  WEB_URL VARCHAR2(256),
  LOGO_IMAGE VARCHAR2(256),
  PREPARED_BY VARCHAR2(64),
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_TWLABMSTR_ID PRIMARY KEY (TW_LAB_MASTER_ID),
  CONSTRAINT FK_TWLABMSTR_PRPRDBY FOREIGN KEY(PREPARED_BY) REFERENCES TW_WEB_USERS(USER_NME),
  CONSTRAINT UK_TWLABMSTR_NME UNIQUE (LAB_NME)
);
CREATE SEQUENCE SEQ_TW_LAB_MASTER_ID CACHE 2;


CREATE TABLE TW_LAB_DETAIL(
  TW_LAB_DETAIL_ID NUMBER,
  TW_LAB_MASTER_ID NUMBER NOT NULL,
  CENTER_NME VARCHAR2(128) NOT NULL,
  CONTACT_PERSON VARCHAR2(64),
  MOBILE_NO VARCHAR2(12) NOT NULL,
  LANDLINE_NO VARCHAR2(12),
  EMAIL VARCHAR2(64),
  CITY_ID NUMBER,
  CITY_AREA_ID NUMBER,
  OPEN_FRM DATE,
  OPEN_TO DATE,
  PREPARED_BY VARCHAR2(64),
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_TWLABDTL_ID PRIMARY KEY (TW_LAB_DETAIL_ID),
  CONSTRAINT FK_TWLABDTL_PHRM FOREIGN KEY(TW_LAB_MASTER_ID) REFERENCES TW_LAB_MASTER(TW_LAB_MASTER_ID),
  CONSTRAINT FK_TWLABDTL_CITY FOREIGN KEY(CITY_ID) REFERENCES CITY(CITY_ID),
  CONSTRAINT FK_TWLABDTL_CITAREA FOREIGN KEY(CITY_AREA_ID) REFERENCES CITY_AREA(CITY_AREA_ID),
  CONSTRAINT FK_TWLABDTL_PRPRDBY FOREIGN KEY(PREPARED_BY) REFERENCES TW_WEB_USERS(USER_NME),
  CONSTRAINT UK_TWLABDTL_MOBILE UNIQUE (MOBILE_NO)
);
CREATE SEQUENCE SEQ_TW_LAB_DETAIL_ID CACHE 2;

ALTER TABLE TW_WEB_USERS ADD TW_LAB_MASTER_ID NUMBER;
ALTER TABLE TW_WEB_USERS ADD TW_LAB_DETAIL_ID NUMBER;

ALTER TABLE TW_WEB_USERS ADD CONSTRAINT FK_TWWEBUSERS_LABMSTRID FOREIGN KEY(TW_LAB_MASTER_ID) REFERENCES TW_LAB_MASTER(TW_LAB_MASTER_ID);

ALTER TABLE TW_WEB_USERS ADD CONSTRAINT FK_TWWEBUSERS_LBDTLID FOREIGN KEY(TW_LAB_DETAIL_ID) REFERENCES TW_LAB_DETAIL(TW_LAB_DETAIL_ID);

ALTER TABLE TW_PRESCRIPTION_DETAIL ADD TW_LAB_MASTER_ID NUMBER;
ALTER TABLE TW_PRESCRIPTION_DETAIL ADD TW_LAB_DETAIL_ID NUMBER;

ALTER TABLE TW_PRESCRIPTION_DETAIL ADD CONSTRAINT FK_TWPRESCDTL_LABMSTRID FOREIGN KEY(TW_LAB_MASTER_ID) REFERENCES TW_LAB_MASTER(TW_LAB_MASTER_ID);
ALTER TABLE TW_PRESCRIPTION_DETAIL ADD CONSTRAINT FK_TWPRESCDTL_LBDTLID FOREIGN KEY(TW_LAB_DETAIL_ID) REFERENCES TW_LAB_DETAIL(TW_LAB_DETAIL_ID);

INSERT INTO TW_RIGHTS VALUES ('Lab Management',0,'#',45,'Lab Management',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,'fa fa-flask');
INSERT INTO TW_RIGHTS VALUES ('Medical Lab',47,'performa.htm?action=addMedicalLab',46,'Medical Lab',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);
INSERT INTO TW_RIGHTS VALUES ('Collection Center',47,'performa.htm?action=addLabCollectionCenter',47,'Collection Center',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);
INSERT INTO TW_RIGHTS VALUES ('View Test Requests',47,'performa.htm?action=viewLabPatient',48,'View Test Requests',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);

-------------------26-01-2018
CREATE TABLE TW_TEST_GROUP(
  TW_TEST_GROUP_ID NUMBER,                                                                                                                                                                         
  TITLE VARCHAR2(128) NOT NULL,
  CONSTRAINT PK_TSTGRUP_ID PRIMARY KEY (TW_TEST_GROUP_ID),
  CONSTRAINT UK_TSTGRUP_TITLE UNIQUE (TITLE)
);
CREATE SEQUENCE SEQ_TW_TEST_GROUP_ID CACHE 2;


ALTER TABLE TW_LAB_TEST ADD TW_TEST_GROUP_ID NUMBER;

ALTER TABLE TW_LAB_TEST ADD CONSTRAINT FK_TWLBTEST_GROUPID FOREIGN KEY(TW_TEST_GROUP_ID) REFERENCES TW_TEST_GROUP(TW_TEST_GROUP_ID);


CREATE TABLE TW_LAB_ATTACHMENT(
  TW_LAB_ATTACHMENT_ID NUMBER,
  TW_DOCTOR_ID NUMBER NOT NULL,
  TW_PATIENT_ID NUMBER NOT NULL,
  TW_PRESCRIPTION_DETAIL_ID NUMBER NOT NULL,
  FILE_NME VARCHAR2(128) NOT NULL,
  FILE_DESC VARCHAR2(128),
  PREPARED_BY VARCHAR2(64),
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_TWLABATT_ID PRIMARY KEY (TW_LAB_ATTACHMENT_ID),
  CONSTRAINT FK_TWLABATT_DOCID FOREIGN KEY(TW_DOCTOR_ID) REFERENCES TW_DOCTOR(TW_DOCTOR_ID),
  CONSTRAINT FK_TWLABATT_PTNTID FOREIGN KEY(TW_PATIENT_ID) REFERENCES TW_PATIENT(TW_PATIENT_ID),
  CONSTRAINT FK_TWLABATT_PRESCDTLID FOREIGN KEY(TW_PRESCRIPTION_DETAIL_ID) REFERENCES TW_PRESCRIPTION_DETAIL(TW_PRESCRIPTION_DETAIL_ID),
  CONSTRAINT FK_TWLABATT_PRPRDBY FOREIGN KEY(PREPARED_BY) REFERENCES TW_WEB_USERS(USER_NME)
);

CREATE SEQUENCE SEQ_TW_LAB_ATTACHMENT_ID CACHE 2;


--------------30-01-2018

ALTER TABLE  TW_DOSE_USAGE ADD TITLE_URDU VARCHAR2(2000);

ALTER TABLE  TW_DOSE_USAGE ADD TW_MEDICAL_SPECIALITY_ID NUMBER;
ALTER TABLE TW_PRESCRIPTION_DETAIL ADD (
  OCCURRENCE VARCHAR2(32)
);

ALTER TABLE TW_DOSE_USAGE ADD CONSTRAINT FK_TWDOSUSG_SPECLID FOREIGN KEY(TW_MEDICAL_SPECIALITY_ID) REFERENCES TW_MEDICAL_SPECIALITY(TW_MEDICAL_SPECIALITY_ID);
INSERT INTO TW_RIGHTS VALUES ('Medicine Usage',2,'performa.htm?action=medicineUsage',41,'Medicine Usage',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);


CREATE TABLE TW_PATIENT_READING(
  TW_PATIENT_READING_ID NUMBER,
  TW_PATIENT_ID NUMBER NOT NULL,
  TW_DOCTOR_ID NUMBER NOT NULL,
  FEVER NUMBER,
  BLOOD_PRESSURE NUMBER,
  SUGAR NUMBER,
  PREPARED_BY VARCHAR2(64),
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_TWPTNTRDING_ID PRIMARY KEY (TW_PATIENT_READING_ID),
  CONSTRAINT FK_TWPTNTRDING_DOCID FOREIGN KEY(TW_DOCTOR_ID) REFERENCES TW_DOCTOR(TW_DOCTOR_ID),
  CONSTRAINT FK_TWPTNTRDING_PTNTID FOREIGN KEY(TW_PATIENT_ID) REFERENCES TW_PATIENT(TW_PATIENT_ID),
  CONSTRAINT FK_TWPTNTRDING_PRPRDBY FOREIGN KEY(PREPARED_BY) REFERENCES TW_WEB_USERS(USER_NME)
);

CREATE SEQUENCE SEQ_TW_PATIENT_READING_ID CACHE 2;

------------------------------31-01-2018

ALTER TABLE TW_DOSE_USAGE ADD  TITLE_URDU NVARCHAR2(2000);
ALTER TABLE TW_DOSE_USAGE DROP COLUMN TITLE_URDU;

ALTER TABLE TW_DOCTOR ADD (
  PRESCRIPTION_LANG VARCHAR2(8) DEFAULT 'ENGLISH'
);

------------------------------09-02-2018

INSERT INTO TW_RIGHTS VALUES ('Examination Question',11,'setup.htm?action=viewExaminationQuestion',7.7,'Examination Question',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);

CREATE TABLE TW_QUESTION_MASTER(
 TW_QUESTION_MASTER_ID NUMBER,
 TW_MEDICAL_SPECIALITY_ID NUMBER,
 QUESTION_TXT VARCHAR2(2000),
 PREPARED_BY VARCHAR2(64),
 PREPARED_DTE DATE DEFAULT SYSDATE,
 CONSTRAINT PK_TWQSTNMSTR_ID PRIMARY KEY (TW_QUESTION_MASTER_ID),
 CONSTRAINT FK_TWQSTNMSTR_SPCLTYID FOREIGN KEY(TW_MEDICAL_SPECIALITY_ID) REFERENCES TW_MEDICAL_SPECIALITY(TW_MEDICAL_SPECIALITY_ID),
 CONSTRAINT FK_TWQSTNMSTR_PRPRDBY FOREIGN KEY(PREPARED_BY) REFERENCES TW_WEB_USERS(USER_NME)
);

CREATE SEQUENCE SEQ_TW_QUESTION_MASTER_ID CACHE 2;
CREATE TABLE TW_QUESTION_DETAIL(
 TW_QUESTION_DETAIL_ID NUMBER,
 TW_QUESTION_MASTER_ID NUMBER,
 ANSWER_TXT VARCHAR2(2000),
 PREPARED_BY VARCHAR2(64),
 PREPARED_DTE DATE DEFAULT SYSDATE,
 CONSTRAINT PK_TWQSTNDTL_ID PRIMARY KEY (TW_QUESTION_DETAIL_ID),
 CONSTRAINT FK_TWQSTNDTL_MSTRID FOREIGN KEY(TW_QUESTION_MASTER_ID) REFERENCES TW_QUESTION_MASTER(TW_QUESTION_MASTER_ID),
 CONSTRAINT FK_TWQSTNDTL_PRPRDBY FOREIGN KEY(PREPARED_BY) REFERENCES TW_WEB_USERS(USER_NME)
);

CREATE SEQUENCE SEQ_TW_QUESTION_DETAIL_ID CACHE 2;


------------------------10-2-2018


CREATE TABLE TW_EXAMINATION_MASTER(
TW_EXAMINATION_MASTER_ID NUMBER,
TW_PATIENT_ID NUMBER NOT NULL,
TW_DOCTOR_ID NUMBER,
REVISION_NO NUMBER NOT NULL,
PREPARED_BY VARCHAR2(64),
PREPARED_DTE DATE DEFAULT SYSDATE,
CONSTRAINT PK_TWEXMMSTR_ID PRIMARY KEY (TW_EXAMINATION_MASTER_ID),
CONSTRAINT FK_TWEXMMSTR_PTNTID FOREIGN KEY(TW_PATIENT_ID) REFERENCES TW_PATIENT(TW_PATIENT_ID),
CONSTRAINT FK_TWEXMMSTR_DOCID FOREIGN KEY(TW_DOCTOR_ID) REFERENCES TW_DOCTOR(TW_DOCTOR_ID),
CONSTRAINT FK_TWEXMMSTR_PRPRDBY FOREIGN KEY(PREPARED_BY) REFERENCES TW_WEB_USERS(USER_NME)
);

CREATE SEQUENCE SEQ_TW_EXAMINATION_MASTER_ID CACHE 2;
CREATE TABLE TW_EXAMINATION_DETAIL(
TW_EXAMINATION_DETAIL_ID NUMBER,
TW_EXAMINATION_MASTER_ID NUMBER,
TW_QUESTION_MASTER_ID NUMBER NOT NULL,
TW_QUESTION_DETAIL_ID NUMBER NOT NULL,
REMARKS VARCHAR2(500),
CONSTRAINT PK_TWEXMDTL_ID PRIMARY KEY (TW_EXAMINATION_DETAIL_ID),
CONSTRAINT FK_TWEXMDTL_QSTNID FOREIGN KEY(TW_EXAMINATION_MASTER_ID) REFERENCES TW_EXAMINATION_MASTER(TW_EXAMINATION_MASTER_ID),
CONSTRAINT FK_TWEXMDTL_SQNMSTRID FOREIGN KEY(TW_QUESTION_MASTER_ID) REFERENCES TW_QUESTION_MASTER(TW_QUESTION_MASTER_ID),
CONSTRAINT FK_TWEXMDTL_SQNDTLID FOREIGN KEY(TW_QUESTION_DETAIL_ID) REFERENCES TW_QUESTION_DETAIL(TW_QUESTION_DETAIL_ID)
);

CREATE SEQUENCE SEQ_TW_EXAMINATION_DETAIL_ID CACHE 2;

----------------------------- 2/14/2018

INSERT INTO TW_RIGHTS VALUES ('Medical Speciality',2,'clinic.htm?action=addMedicalSpeciality',31.5,'Medical Speciality',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);



-----------------------------------------------15-2-2018
ALTER TABLE TW_CLINIC_PATIENT ADD DISCHARGE_ON DATE;
ALTER TABLE TW_CLINIC_PATIENT ADD DISCHARGE_REMARKS VARCHAR2(500);
ALTER TABLE TW_CLINIC_PATIENT ADD DISCHARGE_BY VARCHAR2(64);

ALTER TABLE TW_WEB_USERS DROP COLUMN TW_HOSPITAL_ID;

ALTER TABLE TW_WEB_USERS ADD TW_CLINIC_ID NUMBER;

ALTER TABLE TW_WEB_USERS ADD CONSTRAINT FK_WEBUSERS_CLINICID FOREIGN KEY(TW_CLINIC_ID) REFERENCES TW_CLINIC(TW_CLINIC_ID)

ALTER TABLE TW_DOCTOR ADD FEATURED_IND VARCHAR2(1) DEFAULT 'N';

INSERT INTO TW_RIGHTS VALUES ('Hospital Management',0,'#',50,'Hospital Management',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,'fa fa-hospital-o');

UPDATE TW_RIGHTS SET PARENT_ID=58 WHERE RIGHT_NME='Hospital Ward';
UPDATE TW_RIGHTS SET PARENT_ID=58 WHERE RIGHT_NME='Hospital Room';
UPDATE TW_RIGHTS SET PARENT_ID=58 WHERE RIGHT_NME='Hospital Patient';
UPDATE TW_RIGHTS SET PARENT_ID=58 WHERE RIGHT_NME='Hospital Staff';

------------------------16/02/2018
INSERT INTO TW_ROLE_RIGHTS VALUES(SEQ_TW_ROLE_RIGHTS_ID.NEXTVAL,5,'Hospital Staff');
INSERT INTO TW_ROLE_RIGHTS VALUES(SEQ_TW_ROLE_RIGHTS_ID.NEXTVAL,5,'Hospital Patient');
INSERT INTO TW_ROLE_RIGHTS VALUES(SEQ_TW_ROLE_RIGHTS_ID.NEXTVAL,5,'Hospital Room');
INSERT INTO TW_ROLE_RIGHTS VALUES(SEQ_TW_ROLE_RIGHTS_ID.NEXTVAL,5,'Hospital Ward');
ALTER TABLE TW_WEB_USERS ADD CONTACT_NO VARCHAR2(12);
ALTER TABLE TW_WEB_USERS ADD CONSTRAINT UK_WEBUSERS_CONTACTNO UNIQUE(CONTACT_NO);


------------------------17/02/2018

UPDATE TW_RIGHTS SET RIGHT_NME='Patient Management', RIGHT_TXT='Patient Management' WHERE RIGHT_NME='Clinic Management';

DELETE FROM TW_USER_RIGHT WHERE RIGHT_NME='Hospital Patient';
DELETE FROM TW_ROLE_RIGHTS WHERE RIGHT_NME='Hospital Patient';

UPDATE TW_RIGHTS SET RIGHT_NME='Admit Patient', RIGHT_TXT='Admit Patient' WHERE RIGHT_NME='Hospital Patient';

UPDATE TW_RIGHTS SET PARENT_ID=14 WHERE RIGHT_NME='Admit Patient';

INSERT INTO TW_ROLE_RIGHTS VALUES(SEQ_TW_ROLE_RIGHTS_ID.NEXTVAL,5,'Admit Patient');
INSERT INTO TW_ROLE_RIGHTS VALUES(SEQ_TW_ROLE_RIGHTS_ID.NEXTVAL,5,'Add Appointment');
INSERT INTO TW_ROLE_RIGHTS VALUES(SEQ_TW_ROLE_RIGHTS_ID.NEXTVAL,5,'Appointments Summary');

UPDATE TW_RIGHTS SET URL='clinic.htm?action=addAdmitPatient'  WHERE RIGHT_NME='Admit Patient';

------------------------22-02-2018
CREATE TABLE TW_QUESTION_CATEGORY(
 TW_QUESTION_CATEGORY_ID NUMBER,
 TW_MEDICAL_SPECIALITY_ID NUMBER,
 CATEGORY_NME VARCHAR2(250),
 PREPARED_BY VARCHAR2(64),
 PREPARED_DTE DATE DEFAULT SYSDATE,
 CONSTRAINT PK_TWQSTNCTGRY_ID PRIMARY KEY (TW_QUESTION_CATEGORY_ID),
 CONSTRAINT FK_TWQSTNCTGRY_SPCLTYID FOREIGN KEY(TW_MEDICAL_SPECIALITY_ID) REFERENCES TW_MEDICAL_SPECIALITY(TW_MEDICAL_SPECIALITY_ID),
 CONSTRAINT FK_TWQSTNCTGRY_PRPRDBY FOREIGN KEY(PREPARED_BY) REFERENCES TW_WEB_USERS(USER_NME)
);

CREATE SEQUENCE SEQ_TW_QUESTION_CATEGORY_ID CACHE 2;

ALTER TABLE TW_EXAMINATION_MASTER ADD TW_QUESTION_CATEGORY_ID NUMBER;
ALTER TABLE TW_EXAMINATION_MASTER ADD CONSTRAINT FK_TWEXMMSTR_CTGRYID FOREIGN KEY(TW_QUESTION_CATEGORY_ID) REFERENCES TW_QUESTION_CATEGORY(TW_QUESTION_CATEGORY_ID);

ALTER TABLE TW_QUESTION_MASTER ADD TW_QUESTION_CATEGORY_ID NUMBER;
ALTER TABLE TW_QUESTION_MASTER ADD CONSTRAINT FK_TWQSTNSTR_CTGRYID FOREIGN KEY(TW_QUESTION_CATEGORY_ID) REFERENCES TW_QUESTION_CATEGORY(TW_QUESTION_CATEGORY_ID);


--------------------24-02-2018
CREATE TABLE TW_INTAKE_MASTER(
 TW_INTAKE_MASTER_ID NUMBER,
 TW_MEDICAL_SPECIALITY_ID NUMBER,
 QUESTION_TXT VARCHAR2(2000),
 PREPARED_BY VARCHAR2(64),
 PREPARED_DTE DATE DEFAULT SYSDATE,
 CONSTRAINT PK_TWINTKEMSTR_ID PRIMARY KEY (TW_INTAKE_MASTER_ID),
 CONSTRAINT FK_TWINTKEMSTR_SPCLTYID FOREIGN KEY(TW_MEDICAL_SPECIALITY_ID) REFERENCES TW_MEDICAL_SPECIALITY(TW_MEDICAL_SPECIALITY_ID),
 CONSTRAINT FK_TWINTKEMSTR_PRPRDBY FOREIGN KEY(PREPARED_BY) REFERENCES TW_WEB_USERS(USER_NME)
);

CREATE SEQUENCE SEQ_TW_INTAKE_MASTER_ID CACHE 2;

CREATE TABLE TW_INTAKE_DETAIL(
 TW_INTAKE_DETAIL_ID NUMBER,
 TW_INTAKE_MASTER_ID NUMBER,
 ANSWER_TXT VARCHAR2(8),
 CONSTRAINT PK_TWTNTKEDTL_ID PRIMARY KEY (TW_INTAKE_DETAIL_ID),
 CONSTRAINT FK_TWTNTKEDTL_MSTRID FOREIGN KEY(TW_INTAKE_MASTER_ID) REFERENCES TW_INTAKE_MASTER(TW_INTAKE_MASTER_ID)
);

CREATE SEQUENCE SEQ_TW_INTAKE_DETAIL_ID CACHE 2;

INSERT INTO TW_RIGHTS VALUES ('Intake Questions',2,'performa.htm?action=viewIntakeQuestion',55,'Intake Questions',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);

CREATE TABLE TW_PATIENT_INTAKE_MASTER(
TW_PATIENT_INTAKE_MASTER_ID NUMBER,
TW_PATIENT_ID NUMBER NOT NULL,
TW_DOCTOR_ID NUMBER,
REVISION_NO NUMBER NOT NULL,
PREPARED_BY VARCHAR2(64),
PREPARED_DTE DATE DEFAULT SYSDATE,
CONSTRAINT PK_TWINTKESTR_ID PRIMARY KEY (TW_PATIENT_INTAKE_MASTER_ID),
CONSTRAINT FK_TWINTKESTR_PTNTID FOREIGN KEY(TW_PATIENT_ID) REFERENCES TW_PATIENT(TW_PATIENT_ID),
CONSTRAINT FK_TWINTKESTR_DOCID FOREIGN KEY(TW_DOCTOR_ID) REFERENCES TW_DOCTOR(TW_DOCTOR_ID),
CONSTRAINT FK_TWINTKESTR_PRPRDBY FOREIGN KEY(PREPARED_BY) REFERENCES TW_WEB_USERS(USER_NME)
);

CREATE SEQUENCE SEQ_TW_PTNT_INTAKE_MASTER_ID CACHE 2;

CREATE TABLE TW_PATIENT_INTAKE_DETAIL(
TW_PATIENT_INTAKE_DETAIL_ID NUMBER,
TW_PATIENT_INTAKE_MASTER_ID NUMBER,
TW_INTAKE_MASTER_ID NUMBER NOT NULL,
TW_INTAKE_DETAIL_ID NUMBER NOT NULL,
REMARKS VARCHAR2(250),
CONSTRAINT PK_TWEXMDTL_INTKDTLID PRIMARY KEY (TW_PATIENT_INTAKE_DETAIL_ID),
CONSTRAINT FK_TWEXMDTL_PTNTINTKID FOREIGN KEY(TW_PATIENT_INTAKE_MASTER_ID) REFERENCES TW_PATIENT_INTAKE_MASTER(TW_PATIENT_INTAKE_MASTER_ID),
CONSTRAINT FK_TWEXMDTL_INTKMSTRID FOREIGN KEY(TW_INTAKE_MASTER_ID) REFERENCES TW_INTAKE_MASTER(TW_INTAKE_MASTER_ID),
CONSTRAINT FK_TWEXMDTL_INTKDTLID FOREIGN KEY(TW_INTAKE_DETAIL_ID) REFERENCES TW_INTAKE_DETAIL(TW_INTAKE_DETAIL_ID)
);

CREATE SEQUENCE SEQ_TW_PTNT_INTAKE_DETAIL_ID CACHE 2;

---------------27-02-2018
CREATE TABLE TW_MOBILE_RIGHTS(
TW_MOBILE_RIGHTS_ID NUMBER,
RIGHT_NME VARCHAR2(32),
CONSTRAINT PK_TWMBLRIGHT_ID PRIMARY KEY (TW_MOBILE_RIGHTS_ID)
);
CREATE SEQUENCE SEQ_TW_MOBILE_RIGHTS_ID CACHE 2;

CREATE TABLE TW_USER_MOBILE_RIGHTS(
TW_USER_MOBILE_RIGHTS_ID NUMBER,
TW_MOBILE_RIGHTS_ID NUMBER,
USER_NME VARCHAR2(64),
CONSTRAINT PK_TWUSRMBR_RIGHTID PRIMARY KEY (TW_USER_MOBILE_RIGHTS_ID),
CONSTRAINT FK_TWUSRMBR_RIGHTID FOREIGN KEY(TW_MOBILE_RIGHTS_ID) REFERENCES TW_MOBILE_RIGHTS(TW_MOBILE_RIGHTS_ID),
CONSTRAINT FK_TWUSRMBR_USERNME FOREIGN KEY(USER_NME) REFERENCES TW_WEB_USERS(USER_NME)
);
CREATE SEQUENCE SEQ_TW_USER_MOBILE_RIGHTS_ID CACHE 2;

INSERT INTO TW_MOBILE_RIGHTS VALUES(1,'Prescription');


INSERT INTO TW_RIGHTS VALUES ('Mobile Rights',2,'ums.htm?action=assignUserMobileRights',56,'Mobile Rights',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);

------------------------02/03/2018

INSERT INTO TW_RIGHTS VALUES ('Add Vaccination',11,'setup.htm?action=addVaccination',37,'Add Vaccination',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);

CREATE TABLE TW_VACCINATION(
TW_VACCINATION_ID NUMBER,
TW_MEDICAL_SPECIALITY_ID NUMBER,
VACCINATION_NME VARCHAR2(128),
FREQUENCY NUMBER DEFAULT 1,
TOTAL_DOSE NUMBER DEFAULT 1, 
PREPARED_BY VARCHAR2(64),
PREPARED_DTE DATE DEFAULT SYSDATE,
CONSTRAINT PK_TWVACCINATION_ID PRIMARY KEY (TW_VACCINATION_ID),
CONSTRAINT FK_TWVACINITION_SPCLTYID FOREIGN KEY(TW_MEDICAL_SPECIALITY_ID) REFERENCES TW_MEDICAL_SPECIALITY(TW_MEDICAL_SPECIALITY_ID),
CONSTRAINT FK_TWVACINITION_PRPRDBY FOREIGN KEY(PREPARED_BY) REFERENCES TW_WEB_USERS(USER_NME)
);

CREATE SEQUENCE SEQ_TW_VACCINATION_ID CACHE 2;

------------------------06/03/2018


ALTER TABLE TW_DOCTOR ADD VIDEO_LINK VARCHAR2(65);

CREATE TABLE TW_VACCINATION_MASTER(
TW_VACCINATION_MASTER_ID NUMBER,
TW_MEDICAL_SPECIALITY_ID NUMBER,
VACCINATION_NME VARCHAR2(128),
FREQUENCY NUMBER DEFAULT 1,
PREPARED_BY VARCHAR2(64),
PREPARED_DTE DATE DEFAULT SYSDATE,
CONSTRAINT PK_TWVACCINATIONMSTR_ID PRIMARY KEY (TW_VACCINATION_MASTER_ID),
CONSTRAINT FK_TWVACINITIONMSTR_SPCLTYID FOREIGN KEY(TW_MEDICAL_SPECIALITY_ID) REFERENCES TW_MEDICAL_SPECIALITY(TW_MEDICAL_SPECIALITY_ID),
CONSTRAINT FK_TWVACINITIONMSTR_PRPRDBY FOREIGN KEY(PREPARED_BY) REFERENCES TW_WEB_USERS(USER_NME)
);

CREATE SEQUENCE SEQ_TW_VACCINATION_MASTER_ID CACHE 2;

CREATE TABLE TW_VACCINATION_DETAIL(
TW_VACCINATION_DETAIL_ID NUMBER,
TW_VACCINATION_MASTER_ID NUMBER,
MEDICINE_NME VARCHAR2(164) NOT NULL,
TOTAL_DOSE NUMBER DEFAULT 1,
CONSTRAINT PK_TWVACCINATIONDTL_ID PRIMARY KEY (TW_VACCINATION_DETAIL_ID),
CONSTRAINT FK_TWVACINITIONDTL_MSTRID FOREIGN KEY(TW_VACCINATION_MASTER_ID) REFERENCES TW_VACCINATION_MASTER(TW_VACCINATION_MASTER_ID)
);

CREATE SEQUENCE SEQ_TW_VACCINATION_DETAIL_ID CACHE 2;


CREATE TABLE TW_PATIENT_VACCINATION(
TW_PATIENT_VACCINATION_ID NUMBER,
TW_PATIENT_ID NUMBER NOT NULL,
VACCINATION_DTE DATE NOT NULL,
TW_VACCINATION_MASTER_ID NUMBER NOT NULL,
TW_VACCINATION_DETAIL_ID NUMBER NOT NULL,
TW_DOCTOR_ID NUMBER NOT NULL,
TW_CLINIC_ID NUMBER NOT NULL,
PREPARED_BY VARCHAR2(64),
PREPARED_DTE DATE DEFAULT SYSDATE,
CONSTRAINT PK_PTNTVACC_ID PRIMARY KEY (TW_PATIENT_VACCINATION_ID),
CONSTRAINT FK_PTNTVACC_PTNTID FOREIGN KEY(TW_PATIENT_ID) REFERENCES TW_PATIENT(TW_PATIENT_ID),
CONSTRAINT FK_PTNTVACC_MSTRID FOREIGN KEY(TW_VACCINATION_MASTER_ID) REFERENCES TW_VACCINATION_MASTER(TW_VACCINATION_MASTER_ID),
CONSTRAINT FK_PTNTVACC_DTLID FOREIGN KEY(TW_VACCINATION_MASTER_ID) REFERENCES TW_VACCINATION_MASTER(TW_VACCINATION_MASTER_ID),
CONSTRAINT FK_PTNTVACC_DOCID FOREIGN KEY(TW_DOCTOR_ID) REFERENCES TW_DOCTOR(TW_DOCTOR_ID),
CONSTRAINT FK_PTNTVACC_CLINICID FOREIGN KEY(TW_CLINIC_ID) REFERENCES TW_CLINIC(TW_CLINIC_ID),
CONSTRAINT FK_PTNTVACC_PRPRDBY FOREIGN KEY(PREPARED_BY) REFERENCES TW_WEB_USERS(USER_NME)
);
CREATE SEQUENCE SEQ_TW_PATIENT_VACCINATION_ID CACHE 2;


----------------
ALTER TABLE TW_PATIENT_VACCINATION DROP COLUMN TW_VACCINATION_DETAIL_ID;
ALTER TABLE TW_VACCINATION_MASTER ADD ABBREV VARCHAR2(8)

-------------------------19-MAR-2018
ALTER TABLE TW_QUESTION_CATEGORY ADD FILE_NME VARCHAR2(164);


--------------28-03-2018
ALTER TABLE TW_DOCTOR ADD PMDC_NO VARCHAR2(16);
ALTER TABLE TW_DOCTOR ADD VISITING_CARD VARCHAR2(250);
ALTER TABLE TW_DOCTOR ADD CONSTRAINT UK_DOCPMDC_NO UNIQUE (PMDC_NO);



ALTER TABLE TW_DOCTOR ADD ACCOUNT_IND VARCHAR2(1) DEFAULT 'P';


INSERT INTO TW_RIGHTS VALUES ('Doctor Database',2,'doctor.htm?action=viewDoctorsDatabase',57,'Doctor Database',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);

------------18-04-2018

INSERT INTO TW_RIGHTS VALUES ('Diagnostic',2,'doctor.htm?action=viewDiagnostic',57,'Diagnostic',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);

CREATE TABLE TW_DIAGNOSTICS(
TW_DIAGNOSTICS_ID NUMBER,
TW_MEDICAL_SPECIALITY_ID NUMBER,
TITLE VARCHAR2(128),
INPUT_FIELD VARCHAR2(1) DEFAULT 'N',
PREPARED_BY VARCHAR2(64),
PREPARED_DTE DATE DEFAULT SYSDATE,
CONSTRAINT PK_TWDIAGSTICS_ID PRIMARY KEY (TW_DIAGNOSTICS_ID),
CONSTRAINT FK_TWDIAGSTICS_SPCLTYID FOREIGN KEY(TW_MEDICAL_SPECIALITY_ID) REFERENCES TW_MEDICAL_SPECIALITY(TW_MEDICAL_SPECIALITY_ID),
CONSTRAINT FK_TWDIAGSTICS_PRPRDBY FOREIGN KEY(PREPARED_BY) REFERENCES TW_WEB_USERS(USER_NME)
);

CREATE SEQUENCE SEQ_TW_DIAGNOSTICS_ID CACHE 2;

----------------19-APR-18
CREATE TABLE TW_PRESC_MEDICINE(
  TW_PRESC_MEDICINE_ID NUMBER,
  TW_PRESCRIPTION_MASTER_ID NUMBER,                                                                                                                                                                         
  TW_MEDICINE_ID NUMBER,
  DAYS NUMBER DEFAULT 1,
  QTY NUMBER DEFAULT 1,
  TW_FREQUENCY_ID NUMBER,
  TW_DOSE_USAGE_ID NUMBER,
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_PRESCMDCN_ID PRIMARY KEY (TW_PRESC_MEDICINE_ID),
  CONSTRAINT FK_PRESCMDCN_MSTRID FOREIGN KEY(TW_PRESCRIPTION_MASTER_ID) REFERENCES TW_PRESCRIPTION_MASTER(TW_PRESCRIPTION_MASTER_ID),
  CONSTRAINT FK_PRESCMDCN_CLINCID FOREIGN KEY(TW_MEDICINE_ID) REFERENCES TW_MEDICINE(TW_MEDICINE_ID),
  CONSTRAINT FK_PRESCMDCN_FRQID FOREIGN KEY(TW_FREQUENCY_ID) REFERENCES TW_FREQUENCY(TW_FREQUENCY_ID),
  CONSTRAINT FK_PRESCMDCN_USAGEID FOREIGN KEY(TW_DOSE_USAGE_ID) REFERENCES TW_DOSE_USAGE(TW_DOSE_USAGE_ID)
);
CREATE SEQUENCE SEQ_TW_PRESC_MEDICINE_ID CACHE 2;

CREATE TABLE TW_PRESC_LABTEST(
  TW_PRESC_LABTEST_ID NUMBER,
  TW_PRESCRIPTION_MASTER_ID NUMBER,                                                                                                                                                                         
  TW_LAB_TEST_ID NUMBER,
  TW_LAB_MASTER_ID NUMBER,
  TW_LAB_DETAIL_ID NUMBER,
  OCCURRENCE VARCHAR2(128),
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_PRESCLAB_ID PRIMARY KEY (TW_PRESC_LABTEST_ID),
  CONSTRAINT FK_PRESCLAB_MSTRID FOREIGN KEY(TW_PRESCRIPTION_MASTER_ID) REFERENCES TW_PRESCRIPTION_MASTER(TW_PRESCRIPTION_MASTER_ID),
  CONSTRAINT FK_PRESCLAB_LABMSTRID FOREIGN KEY(TW_LAB_MASTER_ID) REFERENCES TW_LAB_MASTER(TW_LAB_MASTER_ID),
  CONSTRAINT FK_PRESCLAB_LBDTLID FOREIGN KEY(TW_LAB_DETAIL_ID) REFERENCES TW_LAB_DETAIL(TW_LAB_DETAIL_ID)
);
CREATE SEQUENCE SEQ_TW_PRESC_LABTEST_ID CACHE 2;


CREATE TABLE TW_PRESC_EXAMINATION(
  TW_PRESC_EXAMINATION_ID NUMBER,
  TW_PRESCRIPTION_MASTER_ID NUMBER,                                                                                                                                                                         
  TW_QUESTION_CATEGORY_ID NUMBER,
  TW_QUESTION_MASTER_ID NUMBER,
  TW_QUESTION_DETAIL_ID NUMBER,
  REMARKS VARCHAR2(500),
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_PRESCEXAM_ID PRIMARY KEY (TW_PRESC_EXAMINATION_ID),
  CONSTRAINT FK_PRESCEXAM_MSTRID FOREIGN KEY(TW_PRESCRIPTION_MASTER_ID) REFERENCES TW_PRESCRIPTION_MASTER(TW_PRESCRIPTION_MASTER_ID),
  CONSTRAINT FK_PRESCEXAM_CATEGORYID FOREIGN KEY(TW_QUESTION_CATEGORY_ID) REFERENCES TW_QUESTION_CATEGORY(TW_QUESTION_CATEGORY_ID),
  CONSTRAINT FK_PRESCEXAM_SQNMSTRID FOREIGN KEY(TW_QUESTION_MASTER_ID) REFERENCES TW_QUESTION_MASTER(TW_QUESTION_MASTER_ID),
  CONSTRAINT FK_PRESCEXAM_SQNDTLID FOREIGN KEY(TW_QUESTION_DETAIL_ID) REFERENCES TW_QUESTION_DETAIL(TW_QUESTION_DETAIL_ID)
);
CREATE SEQUENCE SEQ_TW_PRESC_EXAMINATION_ID CACHE 2;


CREATE TABLE TW_PRESC_VACCINATION(
  TW_PRESC_VACCINATION_ID NUMBER,
  TW_PRESCRIPTION_MASTER_ID NUMBER,
  VACCINATION_DTE DATE NOT NULL,
  TW_VACCINATION_MASTER_ID NUMBER NOT NULL,
  TW_VACCINATION_DETAIL_ID NUMBER,
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_PRESCVACC_ID PRIMARY KEY (TW_PRESC_VACCINATION_ID),
  CONSTRAINT FK_PRESCVACC_MSTRID FOREIGN KEY(TW_VACCINATION_MASTER_ID) REFERENCES TW_VACCINATION_MASTER(TW_VACCINATION_MASTER_ID),
  CONSTRAINT FK_PRESCVACC_DTLID FOREIGN KEY(TW_VACCINATION_DETAIL_ID) REFERENCES TW_VACCINATION_DETAIL(TW_VACCINATION_DETAIL_ID)
);
CREATE SEQUENCE SEQ_TW_PRESC_VACCINATION_ID CACHE 2;

ALTER TABLE TW_PRESCRIPTION_MASTER ADD PRESC_NO NUMBER;
ALTER TABLE TW_PRESCRIPTION_MASTER ADD POSTED_IND VARCHAR2(1) DEFAULT 'N';

---------------------------------- 27/04/2018

INSERT INTO TW_RIGHTS VALUES ('Doctor Article',11,'setup.htm?action=addDoctorArticle',39,'Doctor Article',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);
INSERT INTO TW_RIGHTS VALUES ('Student',11,'setup.htm?action=addStudent',38,'Student',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);

CREATE TABLE TW_STUDENT(
  TW_STUDENT_ID NUMBER,                                                                                                                                                                         
  STUDENT_NME VARCHAR2(128) NOT NULL,
  MOBILE_NO VARCHAR2(16) NOT NULL,
  GENDER VARCHAR2(1) DEFAULT 'M',
  AGE NUMBER,
  DOB DATE,
  ADDRESS VARCHAR2(250),
  PREPARED_BY VARCHAR2(32),
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_STUDENT_ID PRIMARY KEY (TW_STUDENT_ID),
  CONSTRAINT UK_STUDENT_CELLNO UNIQUE (MOBILE_NO)
);
CREATE SEQUENCE SEQ_TW_STUDENT_ID CACHE 2;


CREATE TABLE TW_DOCTOR_ARTICLE(
  TW_DOCTOR_ARTICLE_ID NUMBER,                                                                                                                                                                         
  TITLE VARCHAR2(128) NOT NULL,
  DESCRIPTION VARCHAR2(2000),
  PREPARED_BY VARCHAR2(32),
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_DOCART_ID PRIMARY KEY (TW_DOCTOR_ARTICLE_ID)
);
CREATE SEQUENCE SEQ_TW_DOCTOR_ARTICLE_ID CACHE 2;

CREATE TABLE TW_ARTICLE_ATTACHMENT(
  TW_ARTICLE_ATTACHMENT_ID NUMBER,
  TW_DOCTOR_ARTICLE_ID NUMBER, 
  FILE_TYPE VARCHAR2(1) DEFAULT 'V',                                                                                                                                                                        
  FILE_NME VARCHAR2(256) NOT NULL,
  CONSTRAINT PK_DOCATTACH_ID PRIMARY KEY (TW_ARTICLE_ATTACHMENT_ID),
  CONSTRAINT FK_DOCATTACH_DOCARTID FOREIGN KEY (TW_DOCTOR_ARTICLE_ID) REFERENCES TW_DOCTOR_ARTICLE(TW_DOCTOR_ARTICLE_ID)
);
CREATE SEQUENCE SEQ_TW_ARTICLE_ATTACHMENT_ID CACHE 2;


CREATE TABLE TW_CLINIC_WARD(
 TW_CLINIC_WARD_ID NUMBER,
 TW_CLINIC_ID NUMBER NOT NULL,
 WARD_NME VARCHAR2(128) NOT NULL,
 TOTAL_BEDS NUMBER DEFAULT 1,
 PREPARED_BY VARCHAR2(64),
 PREPARED_DTE DATE DEFAULT SYSDATE,
 CONSTRAINT PK_CLMCWRD_ID PRIMARY KEY (TW_CLINIC_WARD_ID),
 CONSTRAINT FK_CLMCWRD_CLNCID FOREIGN KEY(TW_CLINIC_ID) REFERENCES TW_CLINIC(TW_CLINIC_ID),
 CONSTRAINT FK_CLMCWRD_PRPRDBY FOREIGN KEY(PREPARED_BY) REFERENCES TW_WEB_USERS(USER_NME)
);


CREATE SEQUENCE SEQ_TW_CLINIC_WARD_ID CACHE 2;

CREATE TABLE TW_CLINIC_ROOM(
 TW_CLINIC_ROOM_ID NUMBER,
 TW_CLINIC_ID NUMBER NOT NULL,
 ROOM_NME VARCHAR2(128) NOT NULL,
 TOTAL_BEDS NUMBER DEFAULT 1,
 PREPARED_BY VARCHAR2(64),
 PREPARED_DTE DATE DEFAULT SYSDATE,
 CONSTRAINT PK_CLMCROOM_ID PRIMARY KEY (TW_CLINIC_ROOM_ID),
 CONSTRAINT FK_CLMCROOM_CLNCID FOREIGN KEY(TW_CLINIC_ID) REFERENCES TW_CLINIC(TW_CLINIC_ID),
 CONSTRAINT FK_CLMCROOM_PRPRDBY FOREIGN KEY(PREPARED_BY) REFERENCES TW_WEB_USERS(USER_NME)
);


CREATE SEQUENCE SEQ_TW_CLINIC_ROOM_ID CACHE 2;

INSERT INTO TW_RIGHTS VALUES ('Hospital Ward',2,'clinic.htm?action=addHospitalWard',31.6,'Hospital Ward',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);
INSERT INTO TW_RIGHTS VALUES ('Hospital Room',2,'clinic.htm?action=addHospitalRoom',31.7,'Hospital Room',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);
INSERT INTO TW_RIGHTS VALUES ('Hospital Patient',2,'clinic.htm?action=addHospitalPatient',31.8,'Hospital Patient',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);

CREATE TABLE TW_CLINIC_PATIENT(
 TW_CLINIC_PATIENT_ID NUMBER,
 TW_CLINIC_ID NUMBER NOT NULL,
 TW_PATIENT_ID NUMBER NOT NULL,
 MR_NO VARCHAR2(8),
 TW_CLINIC_WARD_ID NUMBER,
 TW_CLINIC_ROOM_ID NUMBER,
 BED_NO NUMBER DEFAULT 1,
 STATUS_IND VARCHAR2(1) DEFAULT 'A',
 PREPARED_BY VARCHAR2(64),
 PREPARED_DTE DATE DEFAULT SYSDATE,
 CONSTRAINT PK_CLMCPTNT_ID PRIMARY KEY (TW_CLINIC_PATIENT_ID),
 CONSTRAINT FK_CLMCPTNT_CLNCID FOREIGN KEY(TW_CLINIC_ID) REFERENCES TW_CLINIC(TW_CLINIC_ID),
 CONSTRAINT FK_CLMCPTNT_PTNTID FOREIGN KEY(TW_PATIENT_ID) REFERENCES TW_PATIENT(TW_PATIENT_ID),
 CONSTRAINT FK_CLMCPTNT_WARDID FOREIGN KEY(TW_CLINIC_WARD_ID) REFERENCES TW_CLINIC_WARD(TW_CLINIC_WARD_ID),
 CONSTRAINT FK_CLMCPTNT_ROOMID FOREIGN KEY(TW_CLINIC_ROOM_ID) REFERENCES TW_CLINIC_ROOM(TW_CLINIC_ROOM_ID),
 CONSTRAINT FK_CLMCPTNT_PRPRDBY FOREIGN KEY(PREPARED_BY) REFERENCES TW_WEB_USERS(USER_NME)
);



CREATE SEQUENCE SEQ_TW_CLINIC_PATIENT_ID CACHE 2;



-----------------------18-MAY-18
CREATE TABLE TW_VACCINATION_CATEGORY(
 TW_VACCINATION_CATEGORY_ID NUMBER,
 TW_MEDICAL_SPECIALITY_ID NUMBER,
 CATEGORY_NME VARCHAR2(250),
 PREPARED_BY VARCHAR2(64),
 PREPARED_DTE DATE DEFAULT SYSDATE,
 CONSTRAINT PK_TWVACCNCTGRY_ID PRIMARY KEY (TW_VACCINATION_CATEGORY_ID),
 CONSTRAINT FK_TWVACCNCTGRY_SPCLTYID FOREIGN KEY(TW_MEDICAL_SPECIALITY_ID) REFERENCES TW_MEDICAL_SPECIALITY(TW_MEDICAL_SPECIALITY_ID),
 CONSTRAINT FK_TWVACCNCTGRY_PRPRDBY FOREIGN KEY(PREPARED_BY) REFERENCES TW_WEB_USERS(USER_NME)
);

CREATE SEQUENCE SEQ_TW_VACCINATION_CATEGORY_ID CACHE 2;

ALTER TABLE TW_VACCINATION_MASTER ADD TW_VACCINATION_CATEGORY_ID NUMBER;
ALTER TABLE TW_VACCINATION_MASTER ADD CONSTRAINT FK_TWVACCINATION_CTGRYID FOREIGN KEY(TW_VACCINATION_CATEGORY_ID) REFERENCES TW_VACCINATION_CATEGORY(TW_VACCINATION_CATEGORY_ID);

INSERT INTO TW_RIGHTS VALUES ('Vaccination Category',2,'doctor.htm?action=viewVaccinationCategories',59,'Vaccination Category',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);

ALTER TABLE TW_VACCINATION_DETAIL MODIFY  TOTAL_DOSE VARCHAR2(64);



-------

CREATE TABLE TW_PRESC_DIAGNOSTICS(
  TW_PRESC_DIAGNOSTICS_ID NUMBER,
  TW_PRESCRIPTION_MASTER_ID NUMBER,
  TW_DIAGNOSTICS_ID NUMBER NOT NULL,
  FIELD_VAL VARCHAR2(32),
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_PRESCDIAG_ID PRIMARY KEY (TW_PRESC_DIAGNOSTICS_ID),
  CONSTRAINT FK_PRESCDIAG_DIAGID FOREIGN KEY(TW_DIAGNOSTICS_ID) REFERENCES TW_DIAGNOSTICS(TW_DIAGNOSTICS_ID)
);
CREATE SEQUENCE SEQ_TW_PRESC_DIAGNOSTICS_ID CACHE 2;

DROP TABLE TW_PRINT_LAYOUT;
CREATE TABLE TW_PRINT_LAYOUT(
  TW_PRINT_LAYOUT_ID NUMBER,
  TW_DOCTOR_ID NUMBER NOT NULL,
  TW_CLINIC_ID NUMBER NOT NULL,
  TOP_IMAGE VARCHAR2(250),
  BOTTOM_IMAGE VARCHAR2(250),
  CONSTRAINT PK_PRNTLAYOUT_ID PRIMARY KEY (TW_PRINT_LAYOUT_ID),
  CONSTRAINT FK_PRNTLAYOUT_DOCID FOREIGN KEY(TW_DOCTOR_ID) REFERENCES TW_DOCTOR(TW_DOCTOR_ID),
  CONSTRAINT FK_PRNTLAYOUT_CLINCID FOREIGN KEY(TW_CLINIC_ID) REFERENCES TW_CLINIC(TW_CLINIC_ID)
);


CREATE TABLE TW_SMS_CODE(
  TW_SMS_CODE_ID NUMBER,
  TW_PATIENT_ID NUMBER NOT NULL,
  MOBILE_NO VARCHAR2(16) NOT NULL,
  CODE VARCHAR2(16) NOT NULL,
  STATUS_IND VARCHAR2(1) DEFAULT 'P',
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_SMSCODE_ID PRIMARY KEY (TW_SMS_CODE_ID),
  CONSTRAINT FK_SMSCODEPTNTID FOREIGN KEY(TW_PATIENT_ID) REFERENCES TW_PATIENT(TW_PATIENT_ID)
);

CREATE SEQUENCE SEQ_TW_SMS_CODE_ID CACHE 2;

-----------------------31-MAY-2018
CREATE TABLE TW_MEDICINE_USAGE(
 TW_MEDICINE_USAGE_ID NUMBER,
 TW_MEDICAL_SPECIALITY_ID NUMBER,
 TITLE VARCHAR2(250),
 PREPARED_BY VARCHAR2(64),
 PREPARED_DTE DATE DEFAULT SYSDATE,
 CONSTRAINT PK_TWMEDCINEUSAGE_ID PRIMARY KEY (TW_MEDICINE_USAGE_ID),
 CONSTRAINT FK_TWMDCNUSAGE_SPCLTYID FOREIGN KEY(TW_MEDICAL_SPECIALITY_ID) REFERENCES TW_MEDICAL_SPECIALITY(TW_MEDICAL_SPECIALITY_ID),
 CONSTRAINT FK_TWMDCNUSAGE_PRPRDBY FOREIGN KEY(PREPARED_BY) REFERENCES TW_WEB_USERS(USER_NME)
);

CREATE SEQUENCE SEQ_TW_MEDICINE_USAGE_ID CACHE 2;


INSERT INTO TW_RIGHTS VALUES ('Dose Usage',2,'doctor.htm?action=viewMedicineUsage',60,'Dose Usage',SEQ_TW_RIGHTS_ID.NEXTVAL,'Y',1,NULL);

ALTER TABLE TW_PRESC_MEDICINE ADD TW_MEDICINE_USAGE_ID NUMBER;
ALTER TABLE TW_PRESC_MEDICINE ADD CONSTRAINT FK_TWMPRESCMDCN_MDCNID FOREIGN KEY(TW_MEDICINE_USAGE_ID) REFERENCES TW_MEDICINE_USAGE(TW_MEDICINE_USAGE_ID);



-----------------------05/06/2018
DROP TABLE TW_STUDENT;

CREATE TABLE TW_STUDENT(
  TW_STUDENT_ID NUMBER,                                                                                                                                                                         
  STUDENT_NME VARCHAR2(128) NOT NULL,
  MOBILE_NO VARCHAR2(16) NOT NULL,
  GENDER VARCHAR2(1) DEFAULT 'M',
  CITY_ID NUMBER,
  ADDRESS VARCHAR2(250),
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_STUDENT_ID PRIMARY KEY (TW_STUDENT_ID),
  CONSTRAINT UK_STUDENT_CELLNO UNIQUE (MOBILE_NO),
  CONSTRAINT FK_STUDENT_CITYID FOREIGN KEY (CITY_ID) REFERENCES CITY(CITY_ID)
);
CREATE SEQUENCE SEQ_TW_STUDENT_ID CACHE 2;

ALTER TABLE TW_DOCTOR ADD ACTIVE_IND VARCHAR2(1) DEFAULT 'Y';

ALTER TABLE TW_PATIENT ADD ACTIVE_IND VARCHAR2(1) DEFAULT 'Y';

------------------06-06-2018
DROP TABLE TW_LAB_ATTACHMENT;
CREATE TABLE TW_LAB_ATTACHMENT(
  TW_LAB_ATTACHMENT_ID NUMBER,
  TW_DOCTOR_ID NUMBER NOT NULL,
  TW_PATIENT_ID NUMBER NOT NULL,
  TW_PRESC_LABTEST_ID NUMBER NOT NULL,
  FILE_NME VARCHAR2(128) NOT NULL,
  FILE_DESC VARCHAR2(128),
  PREPARED_BY VARCHAR2(64),
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_TWLABATT_ID PRIMARY KEY (TW_LAB_ATTACHMENT_ID),
  CONSTRAINT FK_TWLABATT_DOCID FOREIGN KEY(TW_DOCTOR_ID) REFERENCES TW_DOCTOR(TW_DOCTOR_ID),
  CONSTRAINT FK_TWLABATT_PTNTID FOREIGN KEY(TW_PATIENT_ID) REFERENCES TW_PATIENT(TW_PATIENT_ID),
  CONSTRAINT FK_TWLABATT_PRESCLABID FOREIGN KEY(TW_PRESC_LABTEST_ID) REFERENCES TW_PRESC_LABTEST(TW_PRESC_LABTEST_ID),
  CONSTRAINT FK_TWLABATT_PRPRDBY FOREIGN KEY(PREPARED_BY) REFERENCES TW_WEB_USERS(USER_NME)
);

CREATE SEQUENCE SEQ_TW_LAB_ATTACHMENT_ID CACHE 2;

----------------------06-09-2018

ALTER TABLE TW_SMS_TEMPLATE ADD (
TW_DOCTOR_ID NUMBER NOT NULL,
CONSTRAINT FK_SMSTEMP_DOCID FOREIGN KEY(TW_DOCTOR_ID) REFERENCES TW_DOCTOR(TW_DOCTOR_ID)
);


CREATE TABLE TW_INTAKE_DISEASE(
TW_INTAKE_DISEASE_ID NUMBER,
TW_MEDICAL_SPECIALITY_ID NUMBER,
TW_DISEASE_ID NUMBER,
PREPARED_DTE DATE DEFAULT SYSDATE,
CONSTRAINT PK_TWINTKEDISEASE_ID PRIMARY KEY (TW_INTAKE_DISEASE_ID),
CONSTRAINT FK_TWINTKEDISES_SPCLTYID FOREIGN KEY(TW_MEDICAL_SPECIALITY_ID) REFERENCES TW_MEDICAL_SPECIALITY(TW_MEDICAL_SPECIALITY_ID),
CONSTRAINT FK_TWINTKE_DISEASEID FOREIGN KEY(TW_DISEASE_ID) REFERENCES TW_DISEASE(TW_DISEASE_ID)
);

CREATE SEQUENCE SEQ_TW_INTAKE_DISEASE_ID CACHE 2;

-----------------------19-JAN-18

CREATE TABLE TW_DOCTOR_REQUEST(
  TW_DOCTOR_REQUEST_ID NUMBER,                                                                                                                                                                         
  DOCTOR_NME VARCHAR2(128) NOT NULL,
  MOBILE_NO VARCHAR2(16) NOT NULL,
  PMDC_NO VARCHAR2(16),
  EXPERIENCE NUMBER,
  GENDER VARCHAR2(1) DEFAULT 'M',
  EMAIL VARCHAR2(20),
  DOCTOR_CATEGORY_ID NUMBER,
  CITY_ID NUMBER,
  STATUS_IND VARCHAR2(1) DEFAULT 'P',
  ADDRESS VARCHAR2(250),
  PREPARED_DTE DATE DEFAULT SYSDATE,
  CONSTRAINT PK_DOCTORREQID_ID PRIMARY KEY (TW_DOCTOR_REQUEST_ID),
  CONSTRAINT UK_DOCTORREQ_CELLNO UNIQUE (MOBILE_NO),
  CONSTRAINT UK_DOCTORREQ_EMAIL UNIQUE (EMAIL),
  CONSTRAINT FK_DOCTORREQ_CATID FOREIGN KEY(DOCTOR_CATEGORY_ID) REFERENCES TW_DOCTOR_CATEGORY(TW_DOCTOR_CATEGORY_ID),
  CONSTRAINT FK_DOCTORREQ_CITYID FOREIGN KEY(CITY_ID) REFERENCES CITY(CITY_ID)
);

CREATE SEQUENCE SEQ_TW_DOCTOR_REQUEST_ID CACHE 2;

ALTER TABLE TW_DOCTOR_REQUEST MODIFY  EMAIL VARCHAR2(128);